<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Code Crunch - Volunteer Guide</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Tailwind for the header you provided -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body{
      font-family:'Google Sans','Roboto',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      background:#f8f9fa; min-height:100vh; color:#202124;
    }
    .navbar{ background:#fff; border-bottom:1px solid #e8eaed; padding:12px 0; position:sticky; top:0; z-index:1000;}
    .nav-container{ max-width:1200px; margin:0 auto; display:flex; justify-content:space-between; align-items:center; padding:0 20px;}
    .nav-brand{ font-size:22px; font-weight:500; color:#4285f4;}
    .nav-links{ display:flex; gap:30px;}
    .nav-link{ color:#5f6368; text-decoration:none; font-weight:400; font-size:14px; padding:8px 16px; border-radius:4px; transition:.2s;}
    .nav-link:hover{ color:#1a73e8; background:#f1f3f4;}

    .timezone-section{ background:#fff; border-bottom:1px solid #e8eaed; padding:24px 20px; margin-bottom:32px;}
    .timezone-header{ text-align:center; margin-bottom:25px;}
    .timezone-header h2{ color:#202124; font-size:28px; font-weight:400; margin:0 0 20px;}
    .timezone-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:20px; max-width:1200px; margin:0 auto;}
    .timezone-item{ background:#fff; border:1px solid #dadce0; border-radius:8px; padding:16px; text-align:center; transition:.2s;}
    .timezone-item:hover{ box-shadow:0 1px 6px rgba(32,33,36,.28); border-color:#dadce0;}
    .timezone-flag{ font-size:20px; margin-bottom:8px;}
    .timezone-time{ font-size:16px; font-weight:500; color:#1a73e8; margin-bottom:4px; font-family:'Roboto Mono',monospace;}
    .timezone-location{ color:#5f6368; font-size:12px;}

    .container{ max-width:1200px; margin:0 auto; padding:20px;}
    .header{ text-align:center; color:#202124; margin-bottom:48px;}
    .header h1{ font-size:32px; font-weight:400; margin-bottom:8px; color:#202124;}
    .header p{ font-size:16px; color:#5f6368; line-height:1.5;}

    /* Registration form card */
    .form-wrap { max-width:900px; margin:0 auto 32px; }
    .form-card {
      background:#fff; border:1px solid #dadce0; border-radius:10px; padding:20px;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }
    .form-card h2 {
      font-size:22px; font-weight:600; color:#202124; margin-bottom:6px;
    }
    .form-muted { color:#5f6368; font-size:14px; margin-bottom:16px; }
    .form-grid {
      display:grid; grid-template-columns:1fr 1fr; gap:16px;
    }
    .form-grid .full { grid-column:1 / -1; }
    .field { display:flex; flex-direction:column; gap:6px; }
    .label { font-size:13px; color:#374151; font-weight:600; }
    .input, .select, .textarea {
      border:1px solid #dadce0; border-radius:6px; padding:10px 12px;
      font-size:14px; color:#202124; background:#fff; transition:border-color .15s ease, box-shadow .15s ease;
    }
    .input:focus, .select:focus, .textarea:focus {
      outline:none; border-color:#1a73e8; box-shadow:0 0 0 3px rgba(26,115,232,.15);
    }
    .textarea { min-height:100px; resize:vertical; }
    .help { font-size:12px; color:#6b7280; }
    .check-row { display:flex; align-items:center; gap:10px; }
    .actions { display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px; padding:12px 16px; border-radius:8px; border:none; cursor:pointer;
      font-weight:600; font-size:14px; text-decoration:none;
      background:#1a73e8; color:#fff; transition:transform .15s ease, box-shadow .15s ease, background .15s ease;
    }
    .btn:hover { background:#1557b0; box-shadow:0 2px 8px rgba(26,115,232,.25); transform:translateY(-1px); }
    .btn.secondary { background:#fff; color:#1a73e8; border:2px solid #1a73e8; }
    .btn.secondary:hover { background:#ebf3ff; }
    .inline-note { font-size:12px; color:#6b7280; margin-top:4px; }

    .volunteer-cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:30px; margin-bottom:50px;}
    .card{ background:#fff; border:1px solid #dadce0; border-radius:8px; padding:24px; transition:.2s; position:relative; overflow:hidden;}
    .card:hover{ box-shadow:0 2px 10px rgba(32,33,36,.28); border-color:#4285f4;}
    .card-icon{ width:48px; height:48px; border-radius:50%; margin:0 auto 16px; display:flex; align-items:center; justify-content:center; font-size:20px; color:#fff; background:#1a73e8;}
    .card h3{ font-size:20px; color:#202124; margin-bottom:8px; text-align:center; font-weight:500;}
    .card p{ color:#5f6368; line-height:1.5; margin-bottom:16px; text-align:center; font-size:14px;}
    .card-button{ display:block; width:100%; padding:12px 24px; background:#1a73e8; color:#fff; text-decoration:none; border-radius:4px; text-align:center; font-weight:500; font-size:14px; transition:.2s; border:none; cursor:pointer;}
    .card-button:hover{ background:#1557b0; box-shadow:0 1px 3px rgba(32,33,36,.28);}

    .hackathons-section{ background:#fff; border:1px solid #dadce0; border-radius:8px; padding:32px;}
    .hackathons-section h2{ color:#202124; font-size:28px; font-weight:500; margin-bottom:32px; text-align:center; position:relative;}
    .section-header{ margin-bottom:24px;}
    .section-header h3{ color:#202124; font-size:20px; font-weight:500; margin-bottom:4px;}
    .section-header p{ color:#5f6368; font-size:14px; margin:0;}

    .hackathons-list{ display:grid; gap:15px;}
    .hackathon-item{ background:#fff; border:1px solid #dadce0; border-radius:8px; padding:20px; display:grid; grid-template-columns:1fr auto auto auto; gap:16px; align-items:center; transition:.2s;}
    .hackathon-item:hover{ box-shadow:0 1px 6px rgba(32,33,36,.28); border-color:#4285f4;}
    .hackathon-info{ display:flex; flex-direction:column; gap:4px;}
    .hackathon-name{ font-weight:500; color:#202124; font-size:16px; margin-bottom:4px;}
    .hackathon-date{ color:#5f6368; font-size:13px;}
    .hackathon-mode{ padding:4px 8px; border-radius:4px; font-size:12px; font-weight:500; text-transform:uppercase; letter-spacing:.3px;}
    .mode-virtual{ background:#e8f0fe; color:#1a73e8; border:1px solid #d2e3fc;}
    .mode-person{ background:#e6f4ea; color:#137333; border:1px solid #ceead6;}
    .mode-hybrid{ background:#fff4e5; color:#ea8600; border:1px solid #fde68a;}
    .mode-tbd{ background:#f3f4f6; color:#6b7280; border:1px solid #d1d5db;}

    .hackathon-countdown{ background:#f8f9fa; color:#202124; padding:6px 12px; border-radius:4px; font-size:12px; font-weight:500; text-align:center; min-width:80px;}
    .countdown-upcoming{ background:#e8f0fe; color:#1a73e8; border:1px solid #d2e3fc;}
    .countdown-past{ background:#fce8e6; color:#d33b01; border:1px solid #f9dedc;}

    .hackathon-link{ background:#1a73e8; color:#fff; padding:8px 16px; border-radius:4px; text-decoration:none; font-weight:500; font-size:14px; transition:.2s;}
    .hackathon-link:hover{ background:#1557b0; box-shadow:0 1px 3px rgba(32,33,36,.28);}

    .cc-blue{ background:#1a73e8;}
    .footer{ color:#fff; padding:32px 0 48px;}
    .footer-container{ max-width:1200px; margin:0 auto; padding:0 20px;}
    .footer-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:24px; margin-bottom:32px;}
    .footer h3{ font-size:18px; font-weight:500; margin-bottom:16px; color:#fff;}
    .footer p{ font-size:14px; opacity:.8; margin-bottom:16px; line-height:1.5;}
    .footer ul{ list-style:none; padding:0; margin:0;}
    .footer li{ margin-bottom:8px;}
    .footer a{ color:#fff; text-decoration:none; font-size:14px; opacity:.8; transition:opacity .2s;}
    .footer a:hover{ opacity:1;}
    .social-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:16px;}
    .social-link{ display:flex; flex-direction:column; align-items:center; color:#fff; text-decoration:none; padding:8px; transition:color .2s;}
    .social-link:hover{ color:#fbbf24;}
    .social-link i{ font-size:18px; margin-bottom:4px;}
    .social-link span{ font-size:11px; text-align:center;}
    .footer-bottom{ margin-top:32px; padding-top:24px; border-top:1px solid rgba(255,255,255,.2); text-align:center;}
    .footer-bottom p{ font-size:14px; opacity:.8; margin-bottom:8px;}
    .footer-bottom .credits{ font-size:12px; opacity:.6;}
    .footer-bottom .credits a{ color:#7dd3fc; text-decoration:none; font-weight:500;}
    .footer-bottom .credits a:hover{ color:#bae6fd;}

    /* policy note */
    .policy-note {
      background:#fff7ed; border:1px solid #fde68a; color:#8a4b00;
      border-radius:8px; padding:14px 16px; margin:0 0 20px 0;
      display:grid; grid-template-columns:auto 1fr; gap:12px; align-items:start; font-size:14px;
    }
    .policy-note .icon { font-size:18px; line-height:1; }
    .policy-note strong { font-weight:600; }

    .card .subtext{ color:#6b7280; font-size:12px; margin-top:8px; text-align:center;}
    .badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:11px; font-weight:600; }
    .badge-live{ background:#e6f4ea; color:#137333; border:1px solid #ceead6; }
    .badge-warn{ background:#fff4e5; color:#b45309; border:1px solid #fde68a; }
    .badge-lock{ background:#f3f4f6; color:#374151; border:1px solid #d1d5db; }

    @media (max-width:768px){
      .nav-container{ flex-direction:column; gap:12px;}
      .nav-links{ flex-wrap:wrap; justify-content:center; gap:8px;}
      .nav-link{ font-size:11px; padding:6px 10px; white-space:nowrap;}
      .timezone-grid{ grid-template-columns:repeat(2,1fr); gap:12px;}
      .timezone-item{ padding:12px;}
      .timezone-location{ font-size:10px;}
      .header h1{ font-size:24px;}
      .header p{ font-size:14px; padding:0 10px;}
      .volunteer-cards{ gap:20px;}
      .hackathon-item{ grid-template-columns:1fr; text-align:center; gap:10px; padding:16px;}
      .hackathon-info{ text-align:center; margin-bottom:8px;}
      .hackathon-name{ font-size:14px; line-height:1.3;}
      .hackathon-date{ font-size:12px;}
      .hackathon-mode,.hackathon-countdown{ font-size:11px; padding:4px 8px;}
      .hackathon-link{ font-size:12px; padding:8px 12px;}
      .card{ padding:18px;}
      .card h3{ font-size:18px;}
      .card p{ font-size:13px;}
      .footer-grid{ grid-template-columns:1fr; gap:20px;}
      .social-grid{ grid-template-columns:repeat(2,1fr);}
      .form-grid { grid-template-columns:1fr; }
    }
    @media (max-width:480px){
      .nav-link{ font-size:10px; padding:5px 8px;}
      .timezone-grid{ grid-template-columns:1fr; gap:10px;}
      .timezone-item{ padding:10px;}
      .header h1{ font-size:20px;}
      .hackathons-section{ padding:20px 16px;}
      .hackathon-item{ padding:12px; gap:8px;}
      .container{ padding:16px;}
    }
  </style>
</head>
<body>
  <!-- Navigation Header -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <a href="https://codecrunchglobal.vercel.app" target="_blank" rel="noopener"><strong>Code Crunch</strong></a>
      </div>
      <div class="nav-links">
        <a href="https://colorstackatfiu.vercel.app/" class="nav-link">ColorStack at FIU</a>
        <a href="https://cahsiatfiu.vercel.app/" class="nav-link">CAHSI at FIU</a>
        <a href="https://gdgatfiu.vercel.app/" class="nav-link">Google Developer Group at FIU</a>
        <a href="https://raspberrypicrunch.vercel.app/" class="nav-link">Raspberry Pi Code Crunch</a>
        <a href="https://codecrunchglobal.vercel.app/hackuniversitydonate.html" class="nav-link">Support Us</a>
      </div>
    </div>
  </nav>

  <!-- Page Title / Hero (Tailwind-based) -->
  <header class="w-full bg-gray-50 border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <p class="text-xs sm:text-sm text-gray-500 mb-2">
        <a href="https://hackuniversity.vercel.app" class="underline hover:no-underline">Hack University</a>
        <span aria-hidden="true"> / </span>
        305 Hackathon Edition — November 2025
      </p>
      <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900">
        Membership &amp; Registration — 305 Hackathon (Nov 2025)
      </h1>
      <p class="mt-2 text-gray-600 max-w-2xl">
        Verify your organization email and register below. After submitting, you'll be redirected to the 305 Hackathon November 2025 site with your details for perks, updates, and check-in.
      </p>
    </div>
  </header>

  <!-- Time Zone Section -->
  <div class="timezone-section">
    <div class="timezone-header"><h2>🏆 Hackathon HQ</h2></div>
    <div class="timezone-grid">
      <div class="timezone-item">
        <div class="timezone-flag">🇺🇸 - HQ</div>
        <div class="timezone-time" id="miami-time">--:--:--</div>
        <div class="timezone-location" id="miami-label">Miami, FL (ET)</div>
      </div>
      <div class="timezone-item">
        <div class="timezone-flag">🇪🇺</div>
        <div class="timezone-time" id="london-time">--:--:--</div>
        <div class="timezone-location">London (GMT)</div>
      </div>
      <div class="timezone-item">
        <div class="timezone-flag">🌍</div>
        <div class="timezone-time" id="lagos-time">--:--:--</div>
        <div class="timezone-location">Lagos (WAT)</div>
      </div>
      <div class="timezone-item">
        <div class="timezone-flag">🌏</div>
        <div class="timezone-time" id="tokyo-time">--:--:--</div>
        <div class="timezone-location">Tokyo (JST)</div>
      </div>
      <div class="timezone-item">
        <div class="timezone-flag">🇦🇺</div>
        <div class="timezone-time" id="sydney-time">--:--:--</div>
        <div class="timezone-location">Sydney (AEDT)</div>
      </div>
      <div class="timezone-item">
        <div class="timezone-flag">🇮🇳</div>
        <div class="timezone-time" id="mumbai-time">--:--:--</div>
        <div class="timezone-location">Mumbai (IST)</div>
      </div>
    </div>
  </div>

  <!-- Registration Form that routes to 305 Hackathon Edition — Nov 2025 -->
  <div class="container">
    <section class="form-wrap" id="register">
      <div class="form-card" aria-labelledby="reg-title">
        <h2 id="reg-title"><i class="fa-solid fa-id-card-clip"></i> Register for 305 Hackathon — November 2025</h2>
        <p class="form-muted">
          Use your <strong>organization email</strong>. After submitting, you’ll be redirected to the 305 Hackathon site with your info attached.
        </p>

        <!-- GET so querystring is visible to the destination if JS is disabled -->
        <form id="reg-form" method="GET" action="https://305hackfall2025.vercel.app">
          <div class="form-grid">
            <div class="field">
              <label class="label" for="fullName">Full Name</label>
              <input class="input" id="fullName" name="name" type="text" placeholder="Jane Doe" required/>
            </div>

            <div class="field">
              <label class="label" for="email">Organization Email</label>
              <input class="input" id="email" name="email" type="email" placeholder="jane.doe@university.edu" required/>
              <div class="help">Must match your university/organization domain for perks.</div>
            </div>

            <div class="field">
              <label class="label" for="role">Role</label>
              <select class="select" id="role" name="role" required>
                <option value="">Select role…</option>
                <option>Hacker</option>
                <option>Volunteer</option>
                <option>Mentor</option>
                <option>Sponsor</option>
                <option>Staff</option>
              </select>
            </div>

            <div class="field">
              <label class="label" for="track">Participation</label>
              <select class="select" id="track" name="track" required>
                <option value="">Choose one…</option>
                <option>Online (Nov 7–15)</option>
                <option>In-Person (Nov 15)</option>
                <option>Both</option>
              </select>
            </div>

            <div class="field full">
              <label class="label" for="notes">Notes (optional)</label>
              <textarea class="textarea" id="notes" name="notes" placeholder="Dietary needs, accessibility, or team info…"></textarea>
            </div>

            <div class="field full">
              <label class="check-row">
                <input type="checkbox" id="agree" required/>
                <span>I agree to event policies and the MLH Code of Conduct.</span>
              </label>
            </div>
          </div>

          <!-- Hidden metadata for destination -->
          <input type="hidden" name="event" value="305 Hackathon Edition — November 2025"/>
          <input type="hidden" name="source" value="volunteer-guide"/>

          <div class="actions">
            <button class="btn" type="submit">
              <i class="fa-solid fa-paper-plane"></i> Register &amp; Continue
            </button>
            <a class="btn secondary" href="https://305hackfall2025.vercel.app" target="_blank" rel="noopener">
              <i class="fa-solid fa-up-right-from-square"></i> View Event Site
            </a>
            <div class="inline-note">You’ll receive confirmation and updates via email.</div>
          </div>
        </form>
      </div>
    </section>

    <!-- Existing content -->
    <div class="header">
      <h1>VOLUNTEER GUIDE</h1>
      <p>Join the Code Crunch volunteer collective and help shape the future of CS students during the school year and hackathons. Complete the volunteer steps to get confirmed and start your mission.</p>
    </div>






    
    <!-- HACK OPERATIONS / EVENTS -->
    <div class="hackathons-section">
      <h2>🚀 HACK OPERATIONS</h2>

      <div class="section-header">
        <h3>🚀 ACTIVE MISSIONS</h3>
        <p>Upcoming events sorted by date</p>
      </div>
      <div class="hackathons-list" id="upcoming-events"></div>

      <div class="section-header" style="margin-top:48px;">
        <h3>📚 PAST EVENTS</h3>
        <p>Completed hackathons and events</p>
      </div>
      <div class="hackathons-list" id="past-events"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="cc-blue footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div>
          <h3>Hack University <span>👨🏻‍💻 👨🏼‍💻 👨🏽‍💻 👨🏾‍💻 👨🏿‍💻👩🏻‍💻 👩🏼‍💻 👩🏽‍💻 👩🏾‍💻 👩🏿‍💻🧑🏻‍💻 🧑🏼‍💻 🧑🏽‍💻 🧑🏾‍💻 🧑🏿‍💻</span></h3>
          <p>A collaborative effort uniting multiple student organizations and global communities with a mission to empower the next generation of innovators, developers, and leaders.</p>
          <p><a href="#">HackUniversity.vercel.app</a></p>
          <div>
            <h4 style="font-size:14px;font-weight:500;margin-bottom:12px;">Connect With Us:</h4>
            <div class="social-grid">
              <a href="#" class="social-link"><i class="fab fa-linkedin"></i><span>LinkedIn</span></a>
              <a href="#" class="social-link"><i class="fab fa-instagram"></i><span>Instagram</span></a>
              <a href="#" class="social-link"><i class="fab fa-github"></i><span>GitHub</span></a>
              <a href="#" class="social-link"><i class="fab fa-youtube"></i><span>YouTube</span></a>
              <a href="#" class="social-link"><i class="fab fa-discord"></i><span>Discord</span></a>
              <a href="#" class="social-link"><i class="far fa-calendar-alt"></i><span>Calendar</span></a>
            </div>
          </div>
        </div>
        <div>
          <h3>Quick Links</h3>
          <ul>
            <li><a href="#">Mission</a></li>
            <li><a href="#">Events</a></li>
            <li><a href="#">Hackathons</a></li>
            <li><a href="#">Membership</a></li>
            <li><a href="#">Join E-Board</a></li>
            <li><a href="#">Resources</a></li>
            <li><a href="#">Join Discord</a></li>
          </ul>
        </div>
        <div>
          <h3>Contact</h3>
          <div style="font-size:14px;opacity:.8;">
            Miami, FL<br/>
            <a href="mailto:codecrunchclub@gmail.com">codecrunchclub@gmail.com</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>© 2025 Hack University. All rights reserved.</p>
        <div class="credits">
          Built with ❤️ for the tech community by <a href="#" target="_blank">Brian Bazurto</a> | Powered by innovation and collaboration
        </div>
      </div>
    </div>
  </footer>

  <script>
    /* ---------- Time helpers ---------- */
    function asLocalDate(ymd){
      const [y,m,d] = ymd.split('-').map(Number);
      return new Date(y, m-1, d);
    }
    function nowInMiami(){
      return new Date(new Date().toLocaleString('en-US',{ timeZone:'America/New_York'}));
    }
    function formatDateMiami(dateStr){
      const d = asLocalDate(dateStr);
      return d.toLocaleDateString('en-US',{
        year:'numeric', month:'long', day:'numeric', timeZone:'America/New_York'
      });
    }
    function getETAbbrev(date = nowInMiami()){
      const miami = new Date(date.toLocaleString('en-US',{ timeZone:'America/New_York'}));
      return miami.getTimezoneOffset() === 240 ? 'EDT' : 'EST'; // 240=EDT, 300=EST
    }

    // Status helper (X days -> Live -> Completed), inclusive of end date
    function getEventStatus(startDateStr, endDateStr) {
      const start = asLocalDate(startDateStr); start.setHours(0,0,0,0);
      const end   = asLocalDate(endDateStr);   end.setHours(23,59,59,999);

      const now = nowInMiami();
      const today = new Date(now); today.setHours(0,0,0,0);

      if (today < start) {
        const diffDays = Math.ceil((start - today) / (1000*60*60*24));
        return { text: `${diffDays} days`, isPast: false, isLive: false };
      }
      if (now <= end) {
        return { text: 'Live', isPast: false, isLive: true };
      }
      return { text: 'Completed', isPast: true, isLive: false };
    }

    /* ---------- Hackathon data ---------- */
    const hackathons = [
      { name:'🏙️ 305 Hackathon: Fall 2025 edition', startDate:'2025-09-19', endDate:'2025-09-21', modality:'in-person', url:'https://305hackfall2025.vercel.app' },
      { name:'👑 EmpowHER Hackathon 2025',        startDate:'2025-10-13', endDate:'2025-10-20', modality:'virtual',   url:'https://empowherhack2025.vercel.app/' },
      { name:'👑 EmpowHER HackDAY 2025',          startDate:'2025-10-18', endDate:'2025-10-18', modality:'in-person', url:'https://empowherhackdayfall25.vercel.app/' },
      { name:'🎆 CodeFest 2025',                   startDate:'2025-12-08', endDate:'2025-12-15', modality:'virtual',   url:'https://codefesthack2025.vercel.app/' },
      { name:'🔥 HackFiesta Miami 2026',           startDate:'2026-03-09', endDate:'2026-03-15', modality:'virtual',   url:'https://hackfiestamiami2026.vercel.app/' },
      { name:'⚡ 305 Hackathon: Spring edition 2026', startDate:'2026-03-20', endDate:'2026-03-22', modality:'tbd',    url:'https://305hackspring2026.vercel.app/' },
      { name:'🌟 SummerCodeX 2025',               startDate:'2025-07-21', endDate:'2025-07-28', modality:'virtual',   url:'#' },
      { name:'⛈️ CodeStorm 2025',                 startDate:'2025-05-19', endDate:'2025-05-26', modality:'virtual',   url:'#' },
      { name:'⚡ 305 Hackathon: Spring 2025 edition', startDate:'2025-03-29', endDate:'2025-03-31', modality:'hybrid', url:'#' },
      { name:'🔥 HackFiesta Miami 2025',           startDate:'2025-03-21', endDate:'2025-03-23', modality:'virtual',   url:'#' }
    ];

    function getModalityClass(modality){
      switch(modality.toLowerCase()){
        case 'virtual': return 'mode-virtual';
        case 'in-person': return 'mode-person';
        case 'hybrid': return 'mode-hybrid';
        case 'tbd': return 'mode-tbd';
        default: return 'mode-tbd';
      }
    }
    function getModalityText(modality){
      switch(modality.toLowerCase()){
        case 'in-person': return 'In Person';
        case 'virtual': return 'Virtual';
        case 'hybrid': return 'Hybrid';
        case 'tbd': return 'TBD';
        default: return 'TBD';
      }
    }

    function renderHackathons(){
      const now = nowInMiami();
      const upcoming = [];
      const past = [];

      const sorted = [...hackathons].sort(
        (a,b) => asLocalDate(a.startDate) - asLocalDate(b.startDate)
      );

      sorted.forEach(h => {
        const startDate = asLocalDate(h.startDate);
        const endDate   = asLocalDate(h.endDate);
        const status    = getEventStatus(h.startDate, h.endDate);

        const range = (h.startDate === h.endDate)
          ? `${formatDateMiami(h.startDate)}`
          : `${formatDateMiami(h.startDate)} - ${formatDateMiami(h.endDate)}`;

        const tz = getETAbbrev();
        const dateLine = `${range} (${tz})`;

        const html = `
          <div class="hackathon-item">
            <div class="hackathon-info">
              <div class="hackathon-name">${h.name}</div>
              <div class="hackathon-date">${dateLine}</div>
            </div>
            <div class="hackathon-mode ${getModalityClass(h.modality)}">${getModalityText(h.modality)}</div>
            <div class="hackathon-countdown ${status.isPast ? 'countdown-past' : 'countdown-upcoming'}">${status.text}</div>
            <a href="${h.url}" class="hackathon-link" target="_blank" rel="noopener">Website</a>
          </div>
        `;

        if (endDate < now) { past.push(html); } else { upcoming.push(html); }
      });

      document.getElementById('upcoming-events').innerHTML = upcoming.join('');
      document.getElementById('past-events').innerHTML = past.join('');
    }

    // Live clocks
    function updateTimes(){
      const now = new Date();

      const miami = new Date(now.toLocaleString('en-US',{ timeZone:'America/New_York'}));
      document.getElementById('miami-time').textContent = miami.toTimeString().split(' ')[0];
      const label = document.getElementById('miami-label');
      if (label) label.textContent = `Miami, FL (${getETAbbrev()})`;

      const london = new Date(now.toLocaleString('en-US',{ timeZone:'Europe/London'}));
      document.getElementById('london-time').textContent = london.toTimeString().split(' ')[0];

      const lagos = new Date(now.toLocaleString('en-US',{ timeZone:'Africa/Lagos'}));
      document.getElementById('lagos-time').textContent = lagos.toTimeString().split(' ')[0];

      const tokyo = new Date(now.toLocaleString('en-US',{ timeZone:'Asia/Tokyo'}));
      document.getElementById('tokyo-time').textContent = tokyo.toTimeString().split(' ')[0];

      const sydney = new Date(now.toLocaleString('en-US',{ timeZone:'Australia/Sydney'}));
      document.getElementById('sydney-time').textContent = sydney.toTimeString().split(' ')[0];

      const mumbai = new Date(now.toLocaleString('en-US',{ timeZone:'Asia/Kolkata'}));
      document.getElementById('mumbai-time').textContent = mumbai.toTimeString().split(' ')[0];
    }

    // Optional "Form 2" availability (kept as-is)
    const currentEventConfig = {
      name: '305 Hack Edition — Nov 2025',
      endDate: '2025-11-16',
      registrationClose: '2025-12-01',
      form2Url: 'https://your-form2-nov2025.example'
    };

    const d = s => { const [y,m,day]=s.split('-').map(Number); return new Date(y,m-1,day); };
    function daysUntil(date){ const t=new Date(); t.setHours(0,0,0,0); const d0=d(date); d0.setHours(0,0,0,0); return Math.ceil((d0 - t)/(1000*60*60*24)); }

    (function updateForm2Card(){
      const opensOn = new Date(d(currentEventConfig.endDate).getTime() + 2*24*60*60*1000);
      const closesOn = d(currentEventConfig.registrationClose);
      const now = new Date(); now.setHours(0,0,0,0);

      const link = document.getElementById('form2-link');
      const status = document.getElementById('form2-status');
      if (!link || !status) return;

      link.href = currentEventConfig.form2Url;

      if (now < opensOn){
        const days = daysUntil(opensOn.toISOString().slice(0,10));
        status.innerHTML =
          `<span class="badge badge-lock">Locked</span> Opens in <strong>${days} day${days===1?'':'s'}</strong> — ${opensOn.toLocaleDateString()}.`;
        link.setAttribute('aria-disabled','true');
        link.style.pointerEvents = 'none';
        link.style.opacity = '.7';
      } else if (now > closesOn){
        status.innerHTML =
          `<span class="badge badge-warn">Closed</span> Donations & registration closed on <strong>${closesOn.toLocaleDateString()}</strong>.`;
        link.setAttribute('aria-disabled','true');
        link.style.pointerEvents = 'none';
        link.style.opacity = '.7';
      } else {
        status.innerHTML =
          `<span class="badge badge-live">Live</span> Accepting donations & registrations until <strong>${closesOn.toLocaleDateString()}</strong>.`;
      }
    })();

    // Hook up form to redirect (keeps GET fallback if JS disabled)
    (function attachFormRedirect(){
      const DEST_URL = 'https://305hackfall2025.vercel.app'; // change if you use a different final URL
      const form = document.getElementById('reg-form');
      if (!form) return;
      form.addEventListener('submit', function(e){
        try {
          e.preventDefault();
          const data = new FormData(form);
          const params = new URLSearchParams(data);
          params.set('ts', Date.now().toString());
          params.set('src', 'membership-form');
          const target = `${DEST_URL}?${params.toString()}`;
          window.location.assign(target);
        } catch (err) {
          form.submit();
        }
      });
    })();

    // Initialize page
    document.addEventListener('DOMContentLoaded', function () {
      renderHackathons();
      updateTimes();
      setInterval(updateTimes, 1000);         // live clocks
      setInterval(renderHackathons, 3600000); // refresh status hourly

      // Click/touch effects + smooth scroll
      const interactive = document.querySelectorAll('.card-button, .hackathon-link, .btn');
      interactive.forEach(el => {
        el.addEventListener('click', function(){ this.style.transform='scale(0.97)'; setTimeout(()=>{ this.style.transform=''; },120); });
        el.addEventListener('touchstart', function(){ this.style.opacity='0.9'; });
        el.addEventListener('touchend', function(){ this.style.opacity=''; });
      });

      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e){
          const targetSel = this.getAttribute('href');
          if (targetSel && targetSel !== '#') {
            e.preventDefault();
            const target = document.querySelector(targetSel);
            if(target){ target.scrollIntoView({ behavior:'smooth', block:'start' }); }
          }
        });
      });
    });
  </script>
</body>
</html>
