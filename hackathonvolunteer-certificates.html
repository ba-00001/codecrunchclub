<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Volunteer Certificates - Code Crunch</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

  <style>
    :root{
      --primary:#1a73e8;
      --primary-dark:#1557b0;
      --accent:#0f172a;
      --accent-soft:#f1f5f9;
      --warning:#ffc107;
      --text-secondary:#4b5563;
      --text-light:#6b7280;
      --bg-color:#202124;
    }

    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Google Sans','Roboto',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#f8f9fa;color:#202124;min-height:100vh}

    /* NAV + ORG CLOCK (same layout style as volunteer wiki) */
    :root{
      --navbar-h:64px;
      --navbar-h-m:72px;
      --clock-bar-h:44px;
      --world-toggle-h:38px;
    }
    .navbar{background:#fff;border-bottom:1px solid #e8eaed;padding:12px 0;box-shadow:0 1px 2px rgba(0,0,0,.05);position:fixed;top:0;left:0;right:0;z-index:2000}
    .nav-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:0 20px}
    .nav-brand{display:flex;flex-direction:column;line-height:1.1}
    .brand-title,.brand-url{display:inline-block;white-space:nowrap;text-decoration:none}
    .brand-title{font-weight:700;font-size:clamp(0.95rem,3vw,1.25rem);color:#1a73e8}
    .brand-url{font-size:clamp(0.8rem,2.5vw,1.05rem);color:#0f766e;text-decoration:underline}
    .nav-links{display:flex;gap:18px;flex-wrap:wrap}
    .nav-link{color:#5f6368;text-decoration:none;font-size:14px;padding:8px 12px;border-radius:6px}
    .nav-link:hover{background:#f1f3f4;color:#1a73e8}
    .nav-toggle{display:none;align-items:center;justify-content:center;width:42px;height:42px;border-radius:6px;border:1px solid #dadce0;background:#fff;color:#202124}
    .event-clock-bar{
      position:fixed;top:var(--navbar-h);left:0;right:0;z-index:1900;height:var(--clock-bar-h);
      display:flex;align-items:center;justify-content:center;gap:10px;background:#fff;border-bottom:1px solid #dadce0;padding:0 14px
    }
    .event-clock-label{font-size:12.5px;color:#5f6368;font-weight:700;white-space:nowrap}
    .event-clock-time{font-size:13px;font-weight:900;color:#202124;white-space:nowrap}
    .event-clock-date{font-size:12.5px;color:#5f6368;white-space:nowrap}
    .world-clock-wrap{
      position:fixed;top:calc(var(--navbar-h) + var(--clock-bar-h));left:0;right:0;z-index:1850;background:#fff;border-bottom:1px solid #e8eaed
    }
    .world-clock-toggle{
      width:100%;height:var(--world-toggle-h);border:0;background:#fff;color:#1a73e8;font-weight:700;font-size:13px;cursor:pointer
    }
    .world-clock-bar{
      display:none;gap:12px;overflow:auto;white-space:nowrap;padding:8px 12px 10px;border-top:1px solid #f1f3f4;justify-content:center
    }
    .world-clock-bar.open{display:flex}
    .world-clock-item{border:1px solid #dadce0;border-radius:8px;padding:6px 10px;background:#fff;min-width:140px;text-align:center}
    .world-clock-time{font-size:13px;font-weight:700;color:#1a73e8;font-family:'Roboto Mono',monospace}
    .world-clock-date{font-size:11px;color:#6b7280;margin-top:2px}
    .world-clock-location{font-size:11.5px;color:#5f6368}

    /* Main */
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .surface{background:#fff;border:1px solid #dadce0;border-radius:12px;padding:24px}

    /* Certificate selector */
    .portal-picker{
      margin-top:14px;
      border:1px solid #dadce0;
      border-radius:10px;
      padding:14px;
      background:#fff;
    }
    .portal-select{
      width:100%;
      min-height:44px;
      border:1px solid #dadce0;
      border-radius:8px;
      padding:0 10px;
      font-size:14px;
      color:#202124;
      background:#fff;
    }
    .portal-grid,
    .portal-btn{
      display:none !important;
    }
    .portal-note{margin-top:10px;color:#4b5563;font-size:.9rem;text-align:center}
    .portal-generator{
      margin-top:12px;
      display:grid;
      gap:10px;
    }
    .portal-email{
      width:100%;
      min-height:44px;
      border:1px solid #dadce0;
      border-radius:8px;
      padding:0 12px;
      font-size:14px;
      color:#202124;
      background:#fff;
    }
    .portal-generate-btn{
      min-height:44px;
      border:0;
      border-radius:8px;
      background:#1a73e8;
      color:#fff;
      font-weight:700;
      font-size:14px;
      cursor:pointer;
    }
    .portal-generate-btn:hover{background:#1557b0}
    .portal-generate-btn:disabled{opacity:.55;cursor:not-allowed}
    .portal-generator-feedback{font-size:.86rem;color:#4b5563;text-align:center}

    /* Cards, checklist, FAQ */
    .card{background:#fff;border:1px solid #dadce0;border-radius:12px;padding:20px}
    .card-title{font-size:20px;font-weight:600;margin-bottom:8px}
    .card-description{color:#5f6368}

    .checklist{list-style:none;padding:0;margin:12px 0}
    .checklist-item{display:flex;gap:12px;align-items:flex-start;margin:12px 0}
    .checklist-number{
      width:28px;height:28px;border-radius:50%;
      background:#1a73e8;color:#fff;display:flex;align-items:center;justify-content:center;
      font-weight:700;flex:0 0 28px
    }
    .checklist-text{color:#374151;line-height:1.6}

    .faq-section{background:#fff;border:1px solid #dadce0;border-radius:12px;padding:20px}
    .faq-title{font-size:20px;font-weight:600}
    .faq-subtitle{color:#5f6368;margin-bottom:12px}
    .faq-container{margin-top:8px}
    .faq-item{border-top:1px solid #eee}
    .faq-item:first-child{border-top:0}
    .faq-question{
      width:100%;text-align:left;background:#f8fafc;border:0;padding:12px;border-radius:8px;
      display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-weight:600
    }
    .faq-answer{display:none;padding:12px 4px;color:#374151}
    .faq-item.open .faq-answer{display:block}
    .faq-item.open .faq-arrow{transform:rotate(180deg)}

    /* Footer */
    .cc-blue{background:#1a73e8}
    .footer{color:#fff;padding:32px 0 48px 0;margin-top:40px}
    .footer-container{max-width:1200px;margin:0 auto;padding:0 20px}
    .footer-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}
    .footer h3{font-size:18px;font-weight:500;margin-bottom:16px;color:#fff}
    .footer p{font-size:14px;opacity:.9;margin-bottom:16px;line-height:1.5}
    .footer ul{list-style:none;padding:0;margin:0}
    .footer li{margin-bottom:8px}
    .footer a{color:#fff;text-decoration:none;font-size:14px;opacity:.9;transition:opacity .2s ease}
    .footer a:hover{opacity:1}
    .social-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:16px}
    .social-link{display:flex;flex-direction:column;align-items:center;color:#fff;text-decoration:none;padding:8px;transition:color .2s ease}
    .social-link:hover{color:#fbbf24}
    .social-link i{font-size:18px;margin-bottom:4px}
    .social-link span{font-size:11px;text-align:center}
    .footer-bottom{margin-top:32px;padding-top:24px;border-top:1px solid rgba(255,255,255,.2);text-align:center}
    .footer-bottom p{font-size:14px;opacity:.9;margin-bottom:8px}
    .footer-bottom .credits{font-size:12px;opacity:.85}

    body{padding-top:calc(var(--navbar-h) + var(--clock-bar-h) + var(--world-toggle-h))}
    @media (max-width:768px){
      .nav-toggle{display:inline-flex}
      .nav-links{display:none;width:100%;flex-direction:column;gap:8px;padding-top:12px}
      .nav-links.is-open{display:flex}
      .nav-container{flex-wrap:wrap;gap:10px}
      .nav-link{width:100%;padding:10px 12px}
      .event-clock-bar{top:var(--navbar-h-m)}
      .world-clock-wrap{top:calc(var(--navbar-h-m) + var(--clock-bar-h))}
      body{padding-top:calc(var(--navbar-h-m) + var(--clock-bar-h) + var(--world-toggle-h))}
    }
    @media (max-width:520px){.container{padding:16px}.event-clock-date{display:none}}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <a href="https://codecrunchglobal.vercel.app/hackuniversity.html#partners" aria-label="Code Crunch Worldwide Home" class="brand-title">Code Crunch Worldwide</a>
        <a href="https://codecrunchglobal.vercel.app/hackuniversity.html#mission" class="brand-url">CodeCrunchGlobal.vercel.app / Home</a>
      </div>
      <button class="nav-toggle" type="button" aria-label="Toggle navigation" aria-controls="huNavLinks" aria-expanded="false">
        <i class="fa-solid fa-bars"></i>
      </button>
      <div class="nav-links" id="huNavLinks">
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity.html#partners">Partners</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity.html#mission">Mission</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackathons.html" target="_blank" rel="noopener noreferrer">Hackathons</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity.html#calendar" target="_blank" rel="noopener noreferrer">Calendar</a>
      </div>
    </div>
  </nav>

  <div class="event-clock-bar" role="status" aria-label="Event Clock - Eastern Time">
    <span class="event-clock-label">Organization Clock - <strong>Eastern Time (ET)</strong> - Miami, FL</span>
    <span id="et-clock" class="event-clock-time">--:--:-- ET</span>
    <span class="event-clock-date">(<span id="et-date"></span>)</span>
  </div>

  <div class="world-clock-wrap">
    <button id="world-clock-toggle" class="world-clock-toggle" type="button" aria-expanded="false" aria-controls="world-clock-bar">World Clocks</button>
    <div id="world-clock-bar" class="world-clock-bar">
      <div class="world-clock-item"><div class="world-clock-time" id="miami-time">--:--:--</div><div class="world-clock-date" id="miami-date">---</div><div class="world-clock-location">Miami, FL (ET)</div></div>
      <div class="world-clock-item"><div class="world-clock-time" id="london-time">--:--:--</div><div class="world-clock-date" id="london-date">---</div><div class="world-clock-location">London (GMT)</div></div>
      <div class="world-clock-item"><div class="world-clock-time" id="lagos-time">--:--:--</div><div class="world-clock-date" id="lagos-date">---</div><div class="world-clock-location">Lagos (WAT)</div></div>
      <div class="world-clock-item"><div class="world-clock-time" id="tokyo-time">--:--:--</div><div class="world-clock-date" id="tokyo-date">---</div><div class="world-clock-location">Tokyo (JST)</div></div>
      <div class="world-clock-item"><div class="world-clock-time" id="sydney-time">--:--:--</div><div class="world-clock-date" id="sydney-date">---</div><div class="world-clock-location">Sydney (AEDT)</div></div>
      <div class="world-clock-item"><div class="world-clock-time" id="mumbai-time">--:--:--</div><div class="world-clock-date" id="mumbai-date">---</div><div class="world-clock-location">Mumbai (IST)</div></div>
    </div>
  </div>

  <main class="container">
    <!-- =========================
         CERTIFICATE PORTAL BUTTONS
         ========================= -->
    <section class="surface" id="certificate-portals">
      <h2 class="card-title" style="text-align:center">Choose your Thank you certificate portal</h2>
      <p class="card-description" style="text-align:center">
        Pick the event you attended to open its certificate page.
      </p>
      <div class="portal-picker">
        <select id="certificate-portal-select" class="portal-select" aria-label="Choose your Thank you certificate portal">
          <option value="">Select your event certificate portal</option>
          <optgroup label="Event Season 2026">
            <option value="" disabled>--- Upcoming ---</option>
            <option value="305_MAR_2026">305 Hackathon Edition Mar 2026 - Session A and B</option>
            <option value="305_APR_2026">305 Hackathon Edition Apr 2026 - Session A and B</option>
            <option value="CODESTORM_MAY_2026">CodeStorm 2026 - Session A and B</option>
            <option value="305_JUN_2026">305 Hackathon Edition Jun 2026 - Session A and B</option>
            <option value="SUMMERCODEX_JUL_2026">SummerCodeX 2026 - Session A and B</option>
            <option value="305_AUG_2026">305 Hackathon Edition Aug 2026 - Session A and B</option>
            <option value="305_SEP_2026">305 Hackathon Edition Sep 2026 - Session A and B</option>
            <option value="EMPOWHER_OCT_2026">EmpowHER Hackathon 2026 - Session A and B</option>
            <option value="305_NOV_2026">305 Hackathon Nov 2026 - Session A and B</option>
            <option value="CODEFEST_NOV_2026">CodeFest Hackathon 2026 - Session A and B</option>
            <option value="" disabled>--- Past ---</option>
            <option value="HACK_FIESTA_FEB_2026">Hack Fiesta Miami Edition Feb 2026 - Session A and B</option>
            <option value="305_JAN_2026">305 Hackathon Edition Jan 2026 - Session A and B</option>
          </optgroup>
          <optgroup label="Event Season 2025">
            <option value="" disabled>--- Upcoming ---</option>
            <option value="" disabled>None</option>
            <option value="" disabled>--- Past ---</option>
            <option value="WINTER_HACKATHON_DEC_2025">ColorStack Winter Hackathon Dec 2025</option>
            <option value="CODEFEST_DEC_2025">CodeFest Dec 2025 - Session A and B</option>
            <option value="305_NOV_2025_SA">305 Hackathon Edition Nov 2025 - Session A (Online)</option>
            <option value="305_NOV_2025_SB">305 Hackathon Edition Nov 2025 - Session B (In-Person)</option>
            <option value="EMPOWHER_OCT_2025_SA">EmpowHER Hackathon Oct 2025 - Session A</option>
            <option value="EMPOWHER_OCT_2025_SB">EmpowHER HackDAY Oct 2025 - Session B</option>
            <option value="305_SEP_2025">305 Hackathon Sep 2025 Edition</option>
            <option value="SUMMERCODEX_JUL_2025">SummerCodeX Jul 2025</option>
            <option value="CODESTORM_MAY_2025">CodeStorm May 2025</option>
            <option value="305_MAR_2025">305 Hackathon Mar 2025 Edition</option>
            <option value="HACKFIESTA_MAR_2025">HackFiesta Miami Mar 2025</option>
          </optgroup>
        </select>
        <div class="portal-generator">
          <input
            id="certificate-email-input"
            class="portal-email"
            type="email"
            inputmode="email"
            autocomplete="email"
            placeholder="Enter your registered email"
            aria-label="Enter your registered email"
          />
          <button id="certificate-generate-btn" class="portal-generate-btn" type="button">
            Generate Certificate
          </button>
          <div id="certificate-generator-feedback" class="portal-generator-feedback" aria-live="polite"></div>
        </div>
      </div>

      <div class="portal-note">
        You will be asked to verify with the same email used at registration on the next page.
      </div>
      <div class="portal-note" style="text-align:left;margin-top:14px">
        <strong>Certificate Generator:</strong><br>
        - Official certificates for confirmed participants<br>
        - Use your registered email<br>
        - Opens a clean tab for Print / Save as PDF<br>
        <span style="font-size:.86rem;color:#6b7280">Enter your email above to check for available certificates...</span>
      </div>
    </section>

    <!-- Eligibility Information Section -->
    <section class="card" style="margin-top: 2rem;">
      <h2 class="card-title">Who Can Request Certificates?</h2>
      <div class="card-description">
        <p>Certificates are available for eligible and verified volunteers who contributed to our hackathon events in official capacities.</p>
      </div>


    </section>

    <!-- Certificate Value Section -->
    <section class="card" style="margin-top: 2rem;">
      <h2 class="card-title">Professional Recognition</h2>
      <div class="card-description">
        <p>Our official certificates provide valuable professional documentation and recognition for your contributions to technology education and innovation.</p>
      </div>

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:1.5rem;">
        <div style="background:rgba(0,255,65,0.05);padding:1rem;border-radius:8px;text-align:center;">
          <div style="font-size:2rem;margin-bottom:.5rem;">1</div>
          <h4 style="color:var(--primary);margin-bottom:.5rem;">Official Documentation</h4>
          <p style="color:var(--text-light);font-size:.9rem;">Verified proof of professional service and community contribution</p>
        </div>

        <div style="background:rgba(0,212,255,0.05);padding:1rem;border-radius:8px;text-align:center;">
          <div style="font-size:2rem;margin-bottom:.5rem;">2</div>
          <h4 style="color:var(--primary-dark);margin-bottom:.5rem;">Portfolio Enhancement</h4>
          <p style="color:var(--text-light);font-size:.9rem;">Professional credential for academic and career portfolios</p>
        </div>

        <div style="background:rgba(255,0,128,0.05);padding:1rem;border-radius:8px;text-align:center;">
          <div style="font-size:2rem;margin-bottom:.5rem;">3</div>
          <h4 style="color:var(--primary);margin-bottom:.5rem;">Community Impact</h4>
          <p style="color:var(--text-light);font-size:.9rem;">Recognition of dedication to technology education</p>
        </div>

        <div style="background:rgba(138,43,226,0.05);padding:1rem;border-radius:8px;text-align:center;">
          <div style="font-size:2rem;margin-bottom:.5rem;">4</div>
          <h4 style="color:var(--primary-dark);margin-bottom:.5rem;">Industry Engagement</h4>
          <p style="color:var(--text-light);font-size:.9rem;">Demonstrates active participation in tech innovation</p>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="card" style="margin-top: 2rem;">
      <h2 class="card-title">How to Get Your Certificate</h2>
      <p class="card-description">Simple 3-step process to download your official participation certificate</p>

      <ul class="checklist">
        <li class="checklist-item">
          <div class="checklist-number">1</div>
          <div class="checklist-text">
            <strong>Pick Your Event</strong><br>
            Use the event selector above to choose the certificate portal.
          </div>
        </li>
        <li class="checklist-item">
          <div class="checklist-number">2</div>
          <div class="checklist-text">
            <strong>Verify Your Participation</strong><br>
            Sign in with the same email address used during registration or volunteer sign-up.
          </div>
        </li>
        <li class="checklist-item">
          <div class="checklist-number">3</div>
          <div class="checklist-text">
            <strong>Download & Print</strong><br>
            Generate high-quality PDF certificates for digital use or printing.
          </div>
        </li>
      </ul>
    </section>

    <!-- Enhanced FAQ Section -->
    <section class="faq-section" style="margin-top: 2rem;">
      <h2 class="faq-title">Frequently Asked Questions</h2>
      <p class="faq-subtitle">Everything you need to know about our certificate system</p>

      <div class="faq-container">
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>How long after an event are certificates available?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p>Certificates are typically available <strong>15-20 business days</strong> after the event concludes to allow time for verification and processing.</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>What if my email address has changed since the event?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p>Try your <strong>original email</strong> first. If it does not work, contact us at <a href="https://codecrunchglobal-linkedin.vercel.app/">codecrunchglobal-linkedin.vercel.app</a> with both your old and new emails so we can update your record.</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>Are these certificates officially recognized?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p><strong>Yes.</strong> Certificates are issued by Code Crunch, supported by Hack University Worldwide, Google Developer Group at FIU, CAHSI at FIU, ColorStack at FIU, and Raspberry Pi Code Crunch.</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>Can I update my name on the certificate?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p>We can correct <strong>spelling or preferred names</strong>. Contact support at <a href="https://codecrunchglobal-linkedin.vercel.app/">the LinkedIn page</a> and we will update records within 15-20 business days.</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>What format are the certificates in?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p>Certificates are generated as <strong>high-quality PDFs</strong> optimized for A4 landscape printing and digital use.</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question" onclick="toggleFAQ(this)">
            <span>I do not see my participation record. What should I do?</span>
            <span class="faq-arrow">v</span>
          </button>
          <div class="faq-answer">
            <p>Try any <strong>alternate emails</strong> you used. If still missing, message us with your full name, event name, and role - we will manually verify.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Support Section -->
    <section class="card" style="margin-top: 2rem; text-align: center;">
      <h2 class="card-title">Need Help?</h2>
      <div class="card-description">
        <p>Having trouble with your certificate? Our support team is here to help!</p>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-top:2rem;">
          <div style="background: rgba(0, 255, 65, 0.1); padding: 1.5rem; border-radius: 12px;">
            <h4 style="color: var(--primary); margin-bottom: 1rem;">LinkedIn Support</h4>
            <p style="color: var(--text-secondary); font-family: 'Courier New', monospace;">
              Contact <strong>Code Crunch Global</strong> on LinkedIn<br>
              <small>Connect with Code Crunch directly</small>
            </p>
            <a href="https://codecrunchglobal-linkedin.vercel.app/" target="_blank" rel="noopener"
               style="display:inline-block;margin-top:.75rem;padding:.5rem 1rem;background:var(--primary);color:#fff;
                      text-decoration:none;border-radius:6px;font-weight:600;transition:all .3s ease;font-family:'Courier New', monospace;">
              Connect on LinkedIn
            </a>
          </div>
        </div>

        <div style="margin-top:1.5rem;padding:1rem;background:rgba(255,193,7,0.1);border-radius:8px;border-left:4px solid var(--warning);">
          <p style="color:var(--warning);font-family:'Courier New', monospace;margin:0;">
            <strong>Quick Tip:</strong> Include your full name, event name, and role for faster assistance.
          </p>
        </div>

        <div style="margin-top:1rem;padding:1rem;background:rgba(26,115,232,0.08);border-radius:8px;border-left:4px solid var(--primary-dark);">
          <p style="color:var(--primary-dark);font-family:'Courier New', monospace;margin:0;">
            <strong>Pro Tip:</strong> For fastest response, reach out via LinkedIn first, then follow up in Discord if needed.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER (Hack University) -->
  <footer class="cc-blue footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div>
          <h3>Hack University</h3>
          <p>
            A collaborative effort uniting multiple student organizations and global communities with a mission to empower the next generation of innovators, developers, and leaders.
          </p>
          <p><a href="#">HackUniversity.vercel.app</a></p>

          <div>
            <h4 style="font-size:14px;font-weight:500;margin-bottom:12px;">Connect With Us:</h4>
            <div class="social-grid">
              <a href="#" class="social-link"><i class="fab fa-linkedin"></i><span>LinkedIn</span></a>
              <a href="#" class="social-link"><i class="fab fa-instagram"></i><span>Instagram</span></a>
              <a href="#" class="social-link"><i class="fab fa-github"></i><span>GitHub</span></a>
              <a href="#" class="social-link"><i class="fab fa-youtube"></i><span>YouTube</span></a>
              <a href="#" class="social-link"><i class="fab fa-discord"></i><span>Discord</span></a>
              <a href="#" class="social-link"><i class="far fa-calendar-alt"></i><span>Calendar</span></a>
            </div>
          </div>
        </div>

        <div>
          <h3>Quick Links</h3>
          <ul>
            <li><a href="#">Mission</a></li>
            <li><a href="#">Events</a></li>
            <li><a href="#">Hackathons</a></li>
            <li><a href="#">Membership</a></li>
            <li><a href="#">Join E-Board</a></li>
            <li><a href="#">Resources</a></li>
            <li><a href="#">Join Discord</a></li>
          </ul>
        </div>

        <div>
          <h3>Contact</h3>
          <div style="font-size:14px;opacity:.9;">
            Miami, FL<br/>
            <a href="mailto:codecrunchclub@gmail.com">codecrunchclub@gmail.com</a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>(c) <span id="year"></span> Hack University. All rights reserved.</p>
        <div class="credits">
          Built for the tech community by <a href="#" target="_blank">Brian Bazurto</a> | Powered by innovation and collaboration
        </div>
      </div>
    </div>
  </footer>

  <!-- Minimal JS (no generator logic on this page) -->
  <script>
    // FAQ toggler
    function toggleFAQ(btn){
      const item = btn.closest('.faq-item');
      if (!item) return;
      item.classList.toggle('open');
    }

    // World clocks
    function updateTimes() {
      const now = new Date();
      const set = (id, tz) => {
        const timeEl = document.getElementById(id);
        const dateEl = document.getElementById(id.replace('-time','-date'));
        if (timeEl) {
          timeEl.textContent = new Intl.DateTimeFormat("en-US", {
            timeZone: tz,
            hour: "numeric",
            minute: "2-digit",
            second: "2-digit",
            hour12: true
          }).format(now).toUpperCase();
        }
        if (dateEl){
          dateEl.textContent = new Intl.DateTimeFormat("en-US", {
            timeZone: tz,
            weekday: "short",
            month: "short",
            day: "numeric",
            year: "numeric"
          }).format(now);
        }
      };
      set('miami-time',"America/New_York");
      set('london-time',"Europe/London");
      set('lagos-time',"Africa/Lagos");
      set('tokyo-time',"Asia/Tokyo");
      set('sydney-time',"Australia/Sydney");
      set('mumbai-time',"Asia/Kolkata");
    }

    function startETClock(){
      const clockEl = document.getElementById("et-clock");
      const dateEl = document.getElementById("et-date");
      if (!clockEl || !dateEl) return;
      const tz = "America/New_York";
      const tick = () => {
        const now = new Date();
        const timeStr = new Intl.DateTimeFormat("en-US", {
          timeZone: tz, hour: "numeric", minute: "2-digit", second: "2-digit", hour12: true
        }).format(now);
        const dateStr = new Intl.DateTimeFormat("en-US", {
          timeZone: tz, weekday: "short", month: "short", day: "numeric", year: "numeric"
        }).format(now);
        clockEl.textContent = `${timeStr} ET`;
        dateEl.textContent = dateStr;
      };
      tick();
      setInterval(tick, 1000);
    }

    function syncTopOffsetPadding(){
      const nav = document.querySelector(".navbar");
      const orgClock = document.querySelector(".event-clock-bar");
      const worldWrap = document.querySelector(".world-clock-wrap");
      const navH = nav ? nav.getBoundingClientRect().height : 0;
      const orgH = orgClock ? orgClock.getBoundingClientRect().height : 0;
      const worldH = worldWrap ? worldWrap.getBoundingClientRect().height : 0;
      document.body.style.paddingTop = `${Math.ceil(navH + orgH + worldH)}px`;
    }

    const DEFAULT_LOGOS = [
      "https://github.com/user-attachments/assets/223a12cb-c5ea-4009-a442-2ad144c8e1d6",
      "https://github.com/user-attachments/assets/f62d5d75-d45f-4c01-b444-1c99a4031e27",
      "https://github.com/user-attachments/assets/c4f4805e-db3b-47a2-9a7f-0b124a66dd85",
      "https://github.com/user-attachments/assets/c9298abf-c85b-4ff8-8b92-e7f38ddcc846",
      "https://github.com/user-attachments/assets/5e2a6622-9702-438f-bb6b-25d8e894839e",
      "https://github.com/user-attachments/assets/c4f4805e-db3b-47a2-9a7f-0b124a66dd85",
      "https://github.com/user-attachments/assets/1eaf8425-7b4b-4035-a84b-b9b0ed28c52c"
    ];
    const SIGNATURE_URL = "https://github.com/user-attachments/assets/02be41eb-2259-4d6d-9a07-1122f79d6f4b";

    const CERTIFICATE_API_URL = "https://script.google.com/macros/s/AKfycbzHxoLmpKJ8A1GBqqfQwy62xTcct7E-L74bjPnNs6NLNfMUUmVQeAaLn60vSU3zVcNp/exec";

    const certificateEvents = [
      // 2026
      { year: 2026, eventId: "305_JAN_2026", name: "305 Hackathon Edition Jan 2026 - Session A and B", endDate: "2026-01-24", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-305jan2026.html", certificateApiUrl: "" },
      { year: 2026, eventId: "HACK_FIESTA_FEB_2026", name: "Hack Fiesta Miami Edition Feb 2026 - Session A and B", endDate: "2026-02-14", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-2026-hackfiestamiamifeb2026.html", certificateApiUrl: "" },
      { year: 2026, eventId: "305_MAR_2026", name: "305 Hackathon Edition Mar 2026 - Session A and B", endDate: "2026-03-20", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "305_APR_2026", name: "305 Hackathon Edition Apr 2026 - Session A and B", endDate: "2026-04-11", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "CODESTORM_MAY_2026", name: "CodeStorm 2026 - Session A and B", endDate: "2026-05-16", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "305_JUN_2026", name: "305 Hackathon Edition Jun 2026 - Session A and B", endDate: "2026-06-13", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "SUMMERCODEX_JUL_2026", name: "SummerCodeX 2026 - Session A and B", endDate: "2026-07-11", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "305_AUG_2026", name: "305 Hackathon Edition Aug 2026 - Session A and B", endDate: "2026-08-15", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "305_SEP_2026", name: "305 Hackathon Edition Sep 2026 - Session A and B", endDate: "2026-09-12", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "EMPOWHER_OCT_2026", name: "EmpowHER Hackathon 2026 - Session A and B", endDate: "2026-10-03", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "305_NOV_2026", name: "305 Hackathon Nov 2026 - Session A and B", endDate: "2026-11-07", url: "#", certificateApiUrl: "" },
      { year: 2026, eventId: "CODEFEST_NOV_2026", name: "CodeFest Hackathon 2026 - Session A and B", endDate: "2026-11-21", url: "#", certificateApiUrl: "" },

      // 2025
      { year: 2025, eventId: "305_NOV_2025_SA", name: "305 Hackathon Edition Nov 2025 - Session A (Online)", endDate: "2025-11-15", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-305nov2025-sa.html", certificateApiUrl: "" },
      { year: 2025, eventId: "305_NOV_2025_SB", name: "305 Hackathon Edition Nov 2025 - Session B (In-Person)", endDate: "2025-11-15", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-305nov2025-sb.html", certificateApiUrl: "" },
      { year: 2025, eventId: "CODEFEST_DEC_2025", name: "CodeFest Dec 2025 - Session A and B", endDate: "2025-12-06", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-codefest2025.html", certificateApiUrl: "" },
      { year: 2025, eventId: "WINTER_HACKATHON_DEC_2025", name: "ColorStack Winter Hackathon Dec 2025", endDate: "2026-01-12", url: "#", certificateApiUrl: "" },
      { year: 2025, eventId: "305_SEP_2025", name: "305 Hackathon Sep 2025 Edition", endDate: "2025-09-21", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-305-fall2025.html", certificateApiUrl: "" },
      { year: 2025, eventId: "EMPOWHER_OCT_2025_SA", name: "EmpowHER Hackathon Oct 2025 - Session A", endDate: "2025-10-20", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-empowher-10.13-20.25.html", certificateApiUrl: "" },
      { year: 2025, eventId: "EMPOWHER_OCT_2025_SB", name: "EmpowHER HackDAY Oct 2025 - Session B", endDate: "2025-10-18", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificates-empowhermini-10.18.25.html", certificateApiUrl: "" },
      { year: 2025, eventId: "SUMMERCODEX_JUL_2025", name: "SummerCodeX Jul 2025", endDate: "2025-07-28", url: "https://codecrunchglobal.vercel.app/hackathonvolunteer-certificate-summercodex2025.html", certificateApiUrl: "" },
      { year: 2025, eventId: "CODESTORM_MAY_2025", name: "CodeStorm May 2025", endDate: "2025-05-26", url: "#", certificateApiUrl: "" },
      { year: 2025, eventId: "305_MAR_2025", name: "305 Hackathon Mar 2025 Edition", endDate: "2025-03-31", url: "#", certificateApiUrl: "" },
      { year: 2025, eventId: "HACKFIESTA_MAR_2025", name: "HackFiesta Miami Mar 2025", endDate: "2025-03-23", url: "#", certificateApiUrl: "" }
    ];

    function asLocalDate(ymd){
      const [y,m,d] = ymd.split('-').map(Number);
      return new Date(y, m - 1, d);
    }

    const esc = s => String(s ?? "").replace(/[&<>\"']/g, m => ({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]));
    // User-facing numbered error messages.
    // Error #1: Request came from a blocked or unknown origin.
    // Error #2: Required query parameters are missing.
    // Error #3: Event sheet is not ready yet (certificate data not published yet).
    const CERTIFICATE_ERROR_MESSAGES = {
      "#1": "Access to certificates is not allowed from this page. Please open the official Code Crunch certificate page and try again.",
      "#2": "Please enter both your registered email and selected event, then try again.",
      "#3": "Certificates are not available yet. Please wait for 2 business weeks after the event to download your certificate. If it has already been more than 2 business weeks, reach us on LinkedIn."
    };

    function getCertificateApiErrorMessage(payload){
      const rawError = String(payload?.error || "").trim();
      const rawCode = String(payload?.errorCode || "").trim().toUpperCase();

      // Backend can send explicit numeric code aliases.
      if (rawCode === "CC-1001" || rawCode === "#1") return `Error #1: ${CERTIFICATE_ERROR_MESSAGES["#1"]}`;
      if (rawCode === "CC-1002" || rawCode === "#2") return `Error #2: ${CERTIFICATE_ERROR_MESSAGES["#2"]}`;
      if (rawCode === "CC-1004" || rawCode === "#3") return `Error #3: ${CERTIFICATE_ERROR_MESSAGES["#3"]}`;

      // Backward-compatible parsing for old backend error strings.
      if (/access denied/i.test(rawError)) return `Error #1: ${CERTIFICATE_ERROR_MESSAGES["#1"]}`;
      if (/missing required parameters/i.test(rawError)) return `Error #2: ${CERTIFICATE_ERROR_MESSAGES["#2"]}`;
      if (/sheet tab not found/i.test(rawError)) return `Error #3: ${CERTIFICATE_ERROR_MESSAGES["#3"]}`;

      if (payload?.userMessage) return String(payload.userMessage);
      return "Could not generate certificate right now. Please try again later.";
    }

    function rolesToText(roles, rolesText){
      if (rolesText) return String(rolesText);
      if (Array.isArray(roles)) return roles.join(", ");
      return roles || "Contributor";
    }
    function normalizeCert(cert){
      return {
        participantName: esc(cert?.participantName || "Participant"),
        hackathonName: esc(cert?.hackathonName || "Hackathon"),
        date: esc(cert?.date || "Date"),
        location: esc(cert?.location || "Location"),
        rolesText: esc(rolesToText(cert?.roles, cert?.rolesText)),
        hackLogoUrl: cert?.hackLogoUrl || "",
        logos: Array.isArray(cert?.logos) ? cert.logos : null,
        signatureUrl: cert?.signatureUrl || SIGNATURE_URL
      };
    }
    function certHash(name, eventName, dateStr){
      const s = `${name}|${eventName}|${dateStr}`;
      let h = 0x811c9dc5;
      for (let i = 0; i < s.length; i++){
        h ^= s.charCodeAt(i);
        h = (h + ((h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24))) >>> 0;
      }
      return ("00000000" + h.toString(16)).slice(-8).toUpperCase();
    }
    function logosHTML(logoUrls){
      const arr = logoUrls && logoUrls.length ? logoUrls : DEFAULT_LOGOS;
      return arr.map(u => `<img src="${u}" alt="Partner Logo" onerror="this.style.display='none'">`).join("");
    }
    function certPageHTML(c){
      const hash8 = certHash(c.participantName, c.hackathonName, c.date);
      const idText = `CC-${(c.date || "").replace(/[^0-9]/g, "").slice(0, 8)}-${hash8}`;
      return `
      <section class="print-page cert-sheet">
        <div class="certificate-page">
          ${c.hackLogoUrl ? `<img src="${c.hackLogoUrl}" alt="Hack Logo" class="hack-logo" onerror="this.style.display='none'">` : ""}
          <div class="content-wrap">
            <div style="text-align:center;margin-bottom:40px">
              <h1>CERTIFICATE</h1>
              <p class="sub">OF RECOGNITION</p>
            </div>
            <p class="presented">This certificate is presented to</p>
            <h2 class="participant-name">${c.participantName}</h2>
            <div class="body-text">
              <p>In recognition of your outstanding contributions as a <strong>${c.rolesText}</strong> at the
              <strong>${c.hackathonName}</strong>, held in <strong>${c.location}</strong> on <strong>${c.date}</strong>.<em> Your insights helped shape a fair and impactful competition experience for all participants.</em></p>
              <br>
            </div>
          </div>
          <div class="cert-bottom">
            <div class="sig-gap"></div>
            <div class="sig-block">
              ${c.signatureUrl
                ? `<img class="sig-img" src="${c.signatureUrl}" alt="Signature" onerror="this.style.display='none'">`
                : `<div class="signature-script">Brian Bazurto</div>`
              }
              <div class="sig-line"></div>
              <div style="font-size:.95rem;font-weight:700;margin-top:6px;">BRIAN BAZURTO</div>
              <div style="font-size:.9rem;font-style:italic">Code Crunch President</div>
              <div style="font-size:.9rem;font-style:italic">Hack University Initiative</div>
              <div class="cert-id">Cert ID: ${idText}</div>
            </div>
            <div class="logo-grid">${logosHTML(c.logos)}</div>
          </div>
        </div>
      </section>`;
    }
    function openCertificatesInNewTab(certs, autoPrint = true){
      const pages = certs.map(certPageHTML).join("");
      const printScript = autoPrint ? `
      (function(){
        function waitImgs(){
          const imgs = [...document.images].filter(x => !x.complete || x.naturalWidth === 0);
          if (!imgs.length) return Promise.resolve();
          return Promise.all(imgs.map(img => new Promise(r => { img.onload = img.onerror = () => r(); })));
        }
        function waitFonts(){
          if (document.fonts && document.fonts.ready) return document.fonts.ready.catch(() => {});
          return Promise.resolve();
        }
        function fitLogos(){
          document.querySelectorAll('.logo-grid').forEach(grid => {
            const n = grid.querySelectorAll('img').length || 1;
            const gap = parseFloat(getComputedStyle(grid).gap) || 12;
            const w = grid.clientWidth || 600;
            const perW = (w - gap * (n - 1)) / n;
            const h = Math.max(16, Math.min(52, Math.floor(perW * 0.55)));
            grid.style.setProperty('--logo-h', h + 'px');
          });
        }
        function afterLayout(){
          fitLogos();
          setTimeout(() => window.print(), 140);
        }
        window.addEventListener('resize', fitLogos);
        Promise.all([waitImgs(), waitFonts()])
          .then(() => requestAnimationFrame(() => requestAnimationFrame(afterLayout)))
          .catch(() => setTimeout(() => window.print(), 260));
      })();
      ` : "";
      const html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>Certificates</title>
      <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600;700&display=swap" rel="stylesheet">
      <style>
      :root{
        --primary:#8C1515;
        --primary-dark:#6f1111;
        --stanford-gold:#B8860B;
        --stanford-gold-light:#D4AF37;
        --stanford-ink:#2d2d2d;
        --text-secondary:#4b5563;
        --logo-h:52px;
      }
      *{box-sizing:border-box}
      body{margin:0;padding:18px;background:#f3f4f6;color:#202124}
      .certificate-page{
        background:#fff;border:10px solid var(--primary);border-radius:10px;color:var(--stanford-ink);
        font-family:"Cormorant Garamond","Times New Roman",serif;margin:0 auto 24px;box-sizing:border-box;
        width:1123px;height:794px;padding:40px;
        display:flex;flex-direction:column;page-break-inside:avoid;position:relative;
      }
      .certificate-page::before{
        content:"";position:absolute;top:12px;right:12px;bottom:12px;left:12px;
        border:2px solid var(--stanford-gold-light);border-radius:6px;pointer-events:none;
      }
      .certificate-page h1{font-size:4rem;font-weight:700;margin-bottom:.35rem;letter-spacing:4px;color:var(--primary-dark);text-align:center}
      .certificate-page .sub{font-size:1.1rem;color:var(--stanford-gold);letter-spacing:6px;text-transform:uppercase;text-align:center}
      .presented{font-style:italic;margin:34px 0 24px;font-size:1.3rem;text-align:center;color:#3d3d3d}
      .participant-name{font-size:4rem;font-weight:600;margin:24px 0 30px;font-style:italic;text-align:center;color:var(--primary-dark);line-height:1.05}
      .body-text{font-size:1.4rem;line-height:1.55;margin:16px auto 26px;color:#3f3f3f;text-align:center;max-width:95%}
      .hack-logo{position:absolute;top:30px;right:30px;max-width:150px;max-height:80px;object-fit:contain}
      .content-wrap{flex:1 1 auto;min-height:0}
      .cert-bottom{margin-top:auto}
      .sig-block{text-align:center;max-width:360px;margin:0 auto}
      .sig-img{max-height:75px;object-fit:contain;margin:0 auto 6px;display:block}
      .signature-script{font-family:'Great Vibes',cursive;font-size:2.1rem;line-height:1;transform:rotate(-2deg);color:#222;letter-spacing:.5px;margin-bottom:10px}
      .sig-line{border-top:2px solid var(--primary-dark);width:260px;margin:0 auto 8px}
      .cert-id{font-family:"Courier New",monospace;font-size:.9rem;color:var(--text-secondary);margin-top:6px}
      .logo-grid{display:flex;flex-wrap:nowrap;justify-content:space-between;gap:12px;align-items:center;margin-top:10px;margin-bottom:0}
      .logo-grid img{width:auto;max-width:100%;height:auto;max-height:var(--logo-h,52px);object-fit:contain;page-break-inside:avoid;break-inside:avoid}
      .sig-gap{height:24px}
      @page { size: landscape; margin: 0; }
      @media print{
        *{-webkit-print-color-adjust:exact;print-color-adjust:exact}
        body{background:#fff!important;padding:0;margin:0}
        .print-page{width:100%!important;height:100%!important;page-break-after:auto;break-after:auto;margin:0!important}
        .certificate-page{
          width:100%!important;height:100%!important;
          border:4mm solid var(--primary)!important;border-radius:0!important;padding:14mm!important;margin:0!important;
          display:flex;flex-direction:column;box-shadow:none!important;overflow:hidden!important;
          page-break-after:always;break-after:page;
        }
        .certificate-page:last-child{page-break-after:auto;break-after:auto}
        .certificate-page::before{top:4mm;right:4mm;bottom:4mm;left:4mm;border:1.2mm solid var(--stanford-gold-light)!important;border-radius:0}
        .content-wrap{flex:1 1 auto;min-height:0}
        .cert-bottom{margin-top:auto}
        .hack-logo{top:8mm!important;right:8mm!important;max-width:30mm!important;max-height:18mm!important}
        .certificate-page h1{font-size:16mm!important}
        .certificate-page .sub{font-size:4mm!important}
        .participant-name{font-size:13mm!important}
        .presented,.body-text{font-size:3.9mm!important}
        .signature-script{font-size:8mm!important}
        .sig-line{width:70mm!important}
        .cert-id{font-size:3.2mm!important}
        .sig-gap{height:10mm!important}
        .sig-img{max-height:14mm!important}
        .logo-grid{gap:8px}
      }
      </style></head><body>${pages}
      <script>${printScript}<\/script></body></html>`;
      const w = window.open("", "_blank", "width=1300,height=900,scrollbars=yes,resizable=yes");
      if (!w) {
        alert("Please allow pop-ups to view/print your certificate.");
        return;
      }
      w.opener = null;
      w.document.open();
      w.document.write(html);
      w.document.close();
    }

    function isValidEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(email || "").trim());
    }

    async function handleGenerateCertificate(){
      const select = document.getElementById("certificate-portal-select");
      const emailInput = document.getElementById("certificate-email-input");
      const btn = document.getElementById("certificate-generate-btn");
      const feedback = document.getElementById("certificate-generator-feedback");
      if (!select || !emailInput || !btn) return;

      const selectedValue = (select.value || "").trim();
      let event = certificateEvents.find((item) => item.eventId === selectedValue) || null;
      if (!event) {
        const selectedIndex = selectedValue === "" ? NaN : Number(selectedValue);
        event = Number.isInteger(selectedIndex) ? certificateEvents[selectedIndex] : null;
      }
      const email = (emailInput.value || "").trim().toLowerCase();

      const setFeedback = (msg, color) => {
        if (!feedback) return;
        feedback.innerHTML = msg;
        feedback.style.color = color || "#4b5563";
      };

      if (!event) {
        setFeedback("Select an event first.", "#d33b01");
        return;
      }
      if (!isValidEmail(email)) {
        setFeedback("Enter a valid registered email address.", "#d33b01");
        return;
      }

      const apiEndpoint = (event.certificateApiUrl || CERTIFICATE_API_URL || "").trim();
      const hasApi = !!apiEndpoint;
      if (!hasApi) {
        const now = new Date();
        const state = asLocalDate(event.endDate) >= now ? "Coming Soon" : "Not Available";
        setFeedback(`Certificates for this event are ${state}.`, state === "Coming Soon" ? "#b45309" : "#d33b01");
        return;
      }

      btn.disabled = true;
      setFeedback("Generating certificate access...", "#1a73e8");
      try {
        const endpoint = new URL(apiEndpoint);
        endpoint.searchParams.set("email", email);
        endpoint.searchParams.set("event", event.eventId || "");
        endpoint.searchParams.set("referer", location.href);
        const res = await fetch(endpoint.toString());
        const payload = await res.json().catch(() => ({}));

        if (payload?.error) {
          setFeedback(esc(getCertificateApiErrorMessage(payload)), "#d33b01");
          return;
        }

        const certs = Array.isArray(payload?.certificates) ? payload.certificates : [];
        if (!certs.length) {
          const msg = payload?.message || "No record was found for this email in the selected event.";
          setFeedback(esc(msg), "#d33b01");
          return;
        }

        const available = certs.filter(c => c.status === "Certificate Available" && c.certificateData);
        const blocked = certs.filter(c => c.status === "Certificate Not Available");

        if (available.length > 0) {
          const normalized = available.map(c => normalizeCert(c.certificateData));
          const ticketIds = [...new Set(available.map(c => c.ticketId).filter(Boolean))];
          setFeedback(
            `<strong>Certificate Ready</strong><br>${ticketIds.length ? `Ticket ID${ticketIds.length > 1 ? "s" : ""}: ${ticketIds.map(id => `<code>${esc(id)}</code>`).join(", ")}<br>` : ""}Opening in a new print-ready tab...`,
            "#137333"
          );
          openCertificatesInNewTab(normalized, true);
          return;
        }

        if (blocked.length === certs.length) {
          const b = blocked[0] || {};
          const msg = b.message || "Certificate not available yet.";
          const next = b.nextStepsMessage ? `<br><br>${esc(b.nextStepsMessage)}` : "";
          setFeedback(`<strong>${esc(msg)}</strong>${next}`, "#d33b01");
          return;
        }

        setFeedback("Unable to determine certificate status for this event.", "#d33b01");
        return;
      } catch (err) {
        setFeedback(err && err.message ? err.message : "Could not generate certificate right now.", "#d33b01");
      } finally {
        btn.disabled = false;
      }
    }


    function renderCertificatePortalSelector(){
      const section = document.getElementById("certificate-portals");
      if (!section) return;

      let select = document.getElementById("certificate-portal-select");
      if (!select) {
        const picker = document.createElement("div");
        picker.className = "portal-picker";
        picker.innerHTML = `
          <select id="certificate-portal-select" class="portal-select" aria-label="Choose your Thank you certificate portal">
            <option value="">Select your event certificate portal</option>
          </select>
        `;
        const note = section.querySelector(".portal-note");
        if (note) section.insertBefore(picker, note);
        else section.appendChild(picker);
        select = picker.querySelector("select");
      }

      const note = section.querySelector(".portal-note");
      if (note) {
        note.textContent = "Enter the same email used at registration.";
      }

      const now = new Date();
      const years = [...new Set(certificateEvents.map(e => e.year))].sort((a,b) => b - a);
      select.innerHTML = "";
      const rootOption = document.createElement("option");
      rootOption.value = "";
      rootOption.textContent = "Select your event certificate portal";
      select.appendChild(rootOption);
      if (!years.length) {
        const empty = document.createElement("option");
        empty.value = "";
        empty.disabled = true;
        empty.textContent = "No events configured";
        select.appendChild(empty);
        return;
      }

      const appendEventOption = (groupEl, eventObj) => {
        const hasApi = !!((eventObj.certificateApiUrl || CERTIFICATE_API_URL || "").trim());
        const opt = document.createElement("option");
        opt.value = String(eventObj.eventId || eventObj.index);
        opt.disabled = false;
        opt.textContent = `${eventObj.name}${hasApi ? "" : " (Coming Soon)"}`;
        groupEl.appendChild(opt);
      };

      years.forEach((year) => {
        const yearEvents = certificateEvents
          .map((e, idx) => ({ ...e, index: idx }))
          .filter(e => e.year === year);

        const upcoming = yearEvents
          .filter((e) => asLocalDate(e.endDate) >= now)
          .sort((a, b) => asLocalDate(a.endDate) - asLocalDate(b.endDate)); // closest upcoming first

        const past = yearEvents
          .filter((e) => asLocalDate(e.endDate) < now)
          .sort((a, b) => asLocalDate(b.endDate) - asLocalDate(a.endDate)); // closest past first, oldest last

        const group = document.createElement("optgroup");
        group.label = `Event Season ${year}`;

        const upHeader = document.createElement("option");
        upHeader.value = "";
        upHeader.disabled = true;
        upHeader.textContent = "--- Upcoming ---";
        group.appendChild(upHeader);
        if (upcoming.length) {
          upcoming.forEach((eventObj) => appendEventOption(group, eventObj));
        } else {
          const noneUp = document.createElement("option");
          noneUp.value = "";
          noneUp.disabled = true;
          noneUp.textContent = "None";
          group.appendChild(noneUp);
        }

        const pastHeader = document.createElement("option");
        pastHeader.value = "";
        pastHeader.disabled = true;
        pastHeader.textContent = "--- Past ---";
        group.appendChild(pastHeader);
        if (past.length) {
          past.forEach((eventObj) => appendEventOption(group, eventObj));
        } else {
          const nonePast = document.createElement("option");
          nonePast.value = "";
          nonePast.disabled = true;
          nonePast.textContent = "None";
          group.appendChild(nonePast);
        }

        select.appendChild(group);
      });
      const feedback = document.getElementById("certificate-generator-feedback");
      select.addEventListener("change", () => {
        if (!feedback) return;
        const selected = select.options[select.selectedIndex];
        if (!select.value || selected.disabled) {
          feedback.textContent = "";
          return;
        }
        feedback.textContent = "Event selected. Enter your registered email and click Generate Certificate.";
        feedback.style.color = "#4b5563";
      });
    }

    try {
      renderCertificatePortalSelector();
    } catch (err) {
      console.error("Immediate renderCertificatePortalSelector failed:", err);
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      // Footer year
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      // FAQ fade-in animation
      const faqItems = document.querySelectorAll('.faq-item');
      faqItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateY(20px)';
        setTimeout(() => {
          item.style.transition = 'all 0.6s ease';
          item.style.opacity = '1';
          item.style.transform = 'translateY(0)';
        }, 100 * (index + 1));
      });

      // Live clocks
      startETClock();
      updateTimes();
      setInterval(updateTimes, 1000);
      const worldToggle = document.getElementById("world-clock-toggle");
      const worldBar = document.getElementById("world-clock-bar");
      if (worldToggle && worldBar){
        const setWorldToggleLabel = (open) => {
          worldToggle.textContent = open ? "World Clocks ^" : "World Clocks v";
          worldToggle.setAttribute("aria-expanded", String(open));
          syncTopOffsetPadding();
        };
        setWorldToggleLabel(false);
        worldToggle.addEventListener("click", () => {
          const open = worldBar.classList.toggle("open");
          setWorldToggleLabel(open);
        });
      }
      const toggleBtn = document.querySelector(".nav-toggle");
      const navLinks = document.getElementById("huNavLinks");
      if (toggleBtn && navLinks){
        const setExpanded = (expanded) => {
          toggleBtn.setAttribute("aria-expanded", String(expanded));
          navLinks.classList.toggle("is-open", expanded);
          const icon = toggleBtn.querySelector("i");
          if (icon) icon.className = expanded ? "fa-solid fa-xmark" : "fa-solid fa-bars";
          syncTopOffsetPadding();
        };
        toggleBtn.addEventListener("click", () => {
          const expanded = toggleBtn.getAttribute("aria-expanded") === "true";
          setExpanded(!expanded);
        });
        window.addEventListener("resize", () => {
          if (window.innerWidth > 768) setExpanded(false);
          syncTopOffsetPadding();
        });
        setExpanded(false);
      }
      syncTopOffsetPadding();
      try {
        renderCertificatePortalSelector();
      } catch (err) {
        const feedback = document.getElementById("certificate-generator-feedback");
        if (feedback) {
          feedback.textContent = "Could not load event list. Refresh the page and check browser console.";
          feedback.style.color = "#d33b01";
        }
        console.error("renderCertificatePortalSelector failed:", err);
      }
      const generateBtn = document.getElementById("certificate-generate-btn");
      const emailInput = document.getElementById("certificate-email-input");
      if (generateBtn) generateBtn.addEventListener("click", handleGenerateCertificate);
      if (emailInput) {
        emailInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") handleGenerateCertificate();
        });
      }
    });
  </script>
</body>
</html>



