<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hack University - Community Platforms Access</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    :root {
      --color-primary: #1a73e8;
      --color-primary-hover: #1557b0;
      --color-text: #202124;
      --color-text-muted: #5f6368;
      --color-border: #dadce0;
      --color-bg: #f8f9fa;
      --color-bg-white: #fff;
      --radius-sm: 10px;
      --radius-md: 14px;
      --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
      --shadow-md: 0 8px 24px rgba(2,16,44,.10);
      --transition-base: .18s ease;
      --navbar-h: 64px;
      --navbar-h-m: 72px;
      --clock-bar-h: 44px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Google Sans","Roboto",-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      color: var(--color-text);
      background: var(--color-bg);
      min-height: 100vh;
      padding-top: calc(var(--navbar-h) + var(--clock-bar-h));
    }
    a { color: inherit; text-decoration: none; }

    .navbar {
      background: var(--color-bg-white);
      border-bottom: 1px solid var(--color-border);
      padding: 12px 0;
      box-shadow: var(--shadow-sm);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 2000;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }
    .nav-brand { display: flex; flex-direction: column; line-height: 1.1; }
    .brand-title, .brand-url { display: inline-block; white-space: nowrap; }
    .brand-title { font-weight: 700; font-size: clamp(0.95rem, 3vw, 1.25rem); color: var(--color-primary); }
    .brand-url { font-size: clamp(0.8rem, 2.5vw, 1.05rem); color: #0f766e; text-decoration: underline; }

    .nav-links { display: flex; gap: 18px; flex-wrap: wrap; }
    .nav-link {
      color: var(--color-text-muted);
      font-weight: 500;
      font-size: 14px;
      padding: 8px 12px;
      border-radius: var(--radius-sm);
      transition: all var(--transition-base);
    }
    .nav-link:hover { color: var(--color-primary); background: #f1f3f4; }

    .nav-toggle {
      display: none;
      align-items: center;
      justify-content: center;
      width: 42px;
      height: 42px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--color-border);
      background: var(--color-bg-white);
      color: var(--color-text);
      box-shadow: var(--shadow-sm);
      transition: all var(--transition-base);
    }

    .event-clock-bar {
      position: fixed;
      top: var(--navbar-h);
      left: 0;
      right: 0;
      z-index: 1900;
      height: var(--clock-bar-h);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: #fff;
      border-bottom: 1px solid var(--color-border);
      box-shadow: var(--shadow-sm);
      padding: 0 14px;
    }

    .event-clock-label {
      font-size: 12.5px;
      color: var(--color-text-muted);
      font-weight: 700;
      white-space: nowrap;
    }

    .event-clock-time {
      font-size: 13px;
      font-weight: 900;
      color: var(--color-text);
      white-space: nowrap;
    }

    .event-clock-date {
      font-size: 12.5px;
      color: var(--color-text-muted);
      white-space: nowrap;
    }

    .container { max-width: 880px; margin: 0 auto; padding: 28px 18px 46px; }
    .card {
      background: var(--color-bg-white);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-md);
      padding: 26px;
    }
    h1 { margin: 0; font-size: clamp(1.7rem, 4vw, 2.5rem); line-height: 1.16; }
    .sub { color: var(--color-text-muted); margin: 10px 0 0; line-height: 1.55; }

    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .field-row { margin-top: 14px; }
    label { display: block; font-weight: 600; font-size: .9rem; margin: 0 0 7px; }
    input {
      width: 100%;
      border: 1px solid var(--color-border);
      border-radius: 10px;
      padding: 12px 14px;
      font-size: .96rem;
      outline: none;
      transition: border-color .18s ease, box-shadow .18s ease;
    }
    input:focus { border-color: #8ab4ff; box-shadow: 0 0 0 4px rgba(26,115,232,.12); }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 16px;
      border-radius: 999px;
      border: 0;
      font-weight: 700;
      cursor: pointer;
      transition: all .16s ease;
      text-decoration: none;
    }
    .btn-main { background: var(--color-primary); color: #fff; width: 100%; margin-top: 16px; }
    .btn-main:hover { background: var(--color-primary-hover); }

    .status {
      margin-top: 12px;
      padding: 11px 12px;
      border-radius: 10px;
      font-size: .9rem;
      border: 1px solid transparent;
      display: none;
    }
    .status.show { display: block; }
    .status.info { background: #e8f0fe; color: #174ea6; border-color: #bfd4ff; }
    .status.success { background: #e6f4ea; color: #0f5132; border-color: #b7dec2; }
    .status.error { background: #fdeaea; color: #842029; border-color: #f3c2c7; }

    .result {
      margin-top: 18px;
      border: 1px solid #cfe0ff;
      border-radius: 12px;
      background: #f4f8ff;
      padding: 16px;
      display: none;
    }
    .join-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    .join-link {
      border-radius: 12px;
      padding: 10px 12px;
      min-height: 46px;
      font-size: .9rem;
      font-weight: 700;
      line-height: 1.25;
      text-align: center;
      white-space: normal;
      background: #1a73e8;
      color: #fff;
    }
    .join-link:hover { background: #1557b0; }

    .notice {
      margin-top: 10px;
      color: var(--color-text-muted);
      font-size: .82rem;
      line-height: 1.45;
    }

    .footer { background: var(--color-primary); color: #fff; padding: 32px 0 48px; margin-top: 24px; }
    .footer-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .footer a { color: #e3f2ff; text-decoration: none; transition: opacity .2s ease; }
    .footer a:hover { opacity: .95; text-decoration: underline; }
    .footer-grid { display: grid; grid-template-columns: 1.3fr 1fr 1fr; gap: 24px; align-items: start; }
    .footer h4 { font-size: 20px; font-weight: 700; margin-bottom: 12px; }
    .footer p { font-size: 15px; opacity: .95; line-height: 1.6; margin: 10px 0; }
    .footer ul { list-style: none; padding: 0; margin: 0; }
    .footer li { margin: 8px 0; }

    .social-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(60px,1fr));
      gap: 10px 12px;
      margin-top: 10px;
    }
    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      border-radius: 10px;
      text-align: center;
      background: rgba(255,255,255,.08);
      transition: transform .15s ease, background .15s ease;
    }
    .social-btn:hover { transform: translateY(-2px); background: rgba(255,255,255,.16); }

    .footer-bottom {
      margin-top: var(--spacing-xl);
      padding-top: var(--spacing-lg);
      border-top: 1px solid rgba(255,255,255,.25);
      text-align: center;
    }
    .footer-bottom p { margin: 0 0 8px; font-size: 14px; opacity: .95; }
    .footer-bottom .credits { font-size: 13px; opacity: .92; }
    .footer-bottom .credits a { color: #bfe6ff; font-weight: 600; }

    @media (max-width: 960px) { .footer-grid { grid-template-columns: 1fr 1fr; } }

    @media (max-width: 768px) {
      .nav-toggle { display: inline-flex; }
      .nav-links { display: none; width: 100%; flex-direction: column; gap: 8px; padding-top: 12px; }
      .nav-links.is-open { display: flex; }
      .nav-container { flex-wrap: wrap; gap: 10px; }
      .nav-link { width: 100%; padding: 10px 12px; }
      .event-clock-bar { top: var(--navbar-h-m); }
      body { padding-top: calc(var(--navbar-h-m) + var(--clock-bar-h)); }
      .grid { grid-template-columns: 1fr; }
      .join-grid { grid-template-columns: 1fr; }
    }

    @media (max-width: 640px) {
      .footer-grid { grid-template-columns: 1fr; }
      .social-grid { grid-template-columns: repeat(3, minmax(80px,1fr)); }
      .footer { padding-bottom: 32px; }
      .event-clock-bar { height: 40px; padding: 0 10px; }
      .event-clock-time { font-size: 12.5px; }
      .event-clock-date { display: none; }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <a href="https://hackuniversity.vercel.app/" aria-label="Hack University Worldwide Home" class="brand-title">Hack University Worldwide Initiative</a>
        <a href="https://hackuniversity.vercel.app/" class="brand-url">HackUniversity.vercel.app / Home</a>
      </div>

      <button class="nav-toggle" type="button" aria-label="Toggle navigation" aria-controls="huNavLinks" aria-expanded="false">
        <i class="fa-solid fa-bars"></i>
      </button>

      <div class="nav-links" id="huNavLinks">
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity.html#partners">Partners</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity.html#mission">Mission</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackathons.html" target="_blank" rel="noopener noreferrer">Hackathons</a>
        <a class="nav-link" href="https://codecrunchglobal.vercel.app/hackuniversity-calendar.html" target="_blank" rel="noopener noreferrer">Calendar</a>
      </div>
    </div>
  </nav>

  <div class="event-clock-bar" role="status" aria-label="Event Clock - Eastern Time">
    <span class="event-clock-label">Organization Clock - <strong>Eastern Time (ET)</strong> · Miami, FL</span>
    <span id="et-clock" class="event-clock-time"></span>
    <span class="event-clock-date">(<span id="et-date"></span>)</span>
  </div>

  <main class="container">
    <section class="card">
      <h1>Community Platforms </h1>
      <p class="sub">Access to private instagram group and GroupMe (If not acccount, the invite link will promt you to create an account first)</p>
      <p class="sub">Enter your details to join the community platforms and mailing list</p>

      <form id="community-access-form" novalidate>
        <div class="grid field-row">
          <div>
            <label for="first-name">First Name</label>
            <input id="first-name" name="firstName" type="text" autocomplete="given-name" placeholder="First name" required />
          </div>
          <div>
            <label for="last-name">Last Name</label>
            <input id="last-name" name="lastName" type="text" autocomplete="family-name" placeholder="Last name" required />
          </div>
        </div>

        <div class="field-row">
          <label for="school">University / College / High School</label>
          <input id="school" name="school" type="text" autocomplete="organization" placeholder="Ex: Florida International University" required />
        </div>

        <div class="grid field-row">
          <div>
            <label for="grad-year">Current  Year / Semester/ Graduation</label>
            <input id="grad-year" name="graduationYear" type="text" maxlength="40" placeholder="Ex: Sophomore / Spring / 2028" required />
          </div>
          <div>
            <label for="Gmail">Email</label>
            <input id="Gmail" name="Gmail" type="Gmail" autocomplete="Gmail" placeholder="name@Gmail.com" required />
          </div>
           <div>
            <label for="email">School Email</label>
            <input id="email" name="email" type="email" autocomplete="email" placeholder="name@school.edu" required />
          </div>
        </div>

        <button id="submit-btn" type="submit" class="btn btn-main">
          <i class="fa-solid fa-paper-plane"></i> Submit and Unlock Community Links
        </button>
      </form>

      <div id="status" class="status" role="status" aria-live="polite"></div>

      <div id="result" class="result">
        <p>Welcome <strong id="welcome-name">Member</strong>. Your info was saved and your community links are ready.</p>
        <div class="join-grid">
          <a id="discord-link" class="btn join-link" href="#" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-discord"></i> Join Discord</a>
          <a id="groupme-link" class="btn join-link" href="#" target="_blank" rel="noopener noreferrer"><i class="fa-solid fa-users"></i> Join GroupMe</a>
          <a id="instagram-link" class="btn join-link" href="#" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-instagram"></i> Join IG Private Group</a>
          <a id="mailing-link" class="btn join-link" href="#" target="_blank" rel="noopener noreferrer"><i class="fa-regular fa-envelope"></i> Join Mailing List</a>
        </div>
        <p class="notice">For security, community invites are only available after verification.</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div>
          <h4>Hack University</h4>
          <p>Empowering the next generation of innovators through collaboration and hands-on learning.</p>
          <a class="inline-block mt-2 font-semibold" href="https://hackuniversity.vercel.app/" target="_blank" rel="noopener">HackUniversity.vercel.app -></a>

          <div class="social-grid">
            <a class="social-btn" href="https://www.linkedin.com/showcase/hack-university-global/" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a>
            <a class="social-btn" href="https://hackuniversity-directory.vercel.app/" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
            <a class="social-btn" href="https://hackuniversity-directory.vercel.app/" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
            <a class="social-btn" href="https://hackuniversity-directory.vercel.app/" target="_blank" rel="noopener"><i class="fab fa-youtube"></i></a>
            <a class="social-btn" href="https://hackuniversity-discord.vercel.app/" target="_blank" rel="noopener"><i class="fab fa-discord"></i></a>
            <a class="social-btn" href="https://hackuniversity-calendar.vercel.app/" target="_blank" rel="noopener"><i class="far fa-calendar-alt"></i></a>
          </div>
        </div>

        <div>
          <h4>Quick Links</h4>
          <ul>
            <li><a href="https://codecrunchglobal.vercel.app/hackuniversity.html#mission">Mission</a></li>
            <li><a href="https://hackuniversity-calendar.vercel.app/" target="_blank" rel="noopener">Events</a></li>
            <li><a href="https://photos.app.goo.gl/71FC5SLTQcPRbXjx6" target="_blank" rel="noopener">Photo Album</a></li>
            <li><a href="https://codecrunchglobal.vercel.app/hackathons.html" target="_blank" rel="noopener">Hackathons</a></li>
            <li><a href="https://hackuniversity-membership.vercel.app/" target="_blank" rel="noopener">Membership</a></li>
            <li><a href="https://hackuniversity-eboard.vercel.app/" target="_blank" rel="noopener">Join E-Board</a></li>
            <li><a href="https://codecrunchglobal.vercel.app/index.html#resources" target="_blank" rel="noopener">Resources</a></li>
            <li><a href="https://hackuniversity-discord.vercel.app/" target="_blank" rel="noopener">Join Discord</a></li>
          </ul>
        </div>

        <div>
          <h4>Contact</h4>
          <address style="font-style: normal; font-size: 14px; line-height: 1.7; opacity: .9;">
            Florida International University<br>
            Miami, FL<br>
            <a href="mailto:codecrunchclub@gmail.com">codecrunchclub@gmail.com</a>
          </address>
        </div>
      </div>

      <div class="footer-bottom">
        <p>(c) 2026 Hack University.</p>
        <div class="credits">Built with care by <a href="https://www.linkedin.com/in/iba001/" target="_blank" rel="noopener">Brian Bazurto</a>.</div>
      </div>
    </div>
  </footer>

  <script>
    /*
      Submit Error Guide:
      #1 API URL missing or placeholder.
      #2 Request timed out (network or Apps Script delay).
      #3 HTTP error from API (deployment/access/permissions issue).
      #4 API returned non-JSON (often Apps Script not deployed as Web App).
      #5 API JSON returned { ok: false } with server-side validation/error.
      #6 Network/CORS/fetch error (wrong deployment access, blocked request, offline).
      #7 Unexpected client/runtime error.
    */
    const API_URL = "https://script.google.com/macros/s/AKfycbwS_PV38PgNZzzB0wQEZ25gtMw688RK3WQe9o6hA4tjakrz6l_xhfqz81cX9YjItrHEXw/exec";

    const form = document.getElementById("community-access-form");
    const submitBtn = document.getElementById("submit-btn");
    const statusEl = document.getElementById("status");
    const resultEl = document.getElementById("result");
    const welcomeName = document.getElementById("welcome-name");

    const firstNameInput = document.getElementById("first-name");
    const lastNameInput = document.getElementById("last-name");
    const schoolInput = document.getElementById("school");
    const gradYearInput = document.getElementById("grad-year");
    const emailInput = document.getElementById("email");

    const discordLink = document.getElementById("discord-link");
    const groupmeLink = document.getElementById("groupme-link");
    const instagramLink = document.getElementById("instagram-link");
    const mailingLink = document.getElementById("mailing-link");

    function setStatus(type, message) {
      statusEl.className = `status show ${type}`;
      statusEl.textContent = message;
    }

    function clearStatus() {
      statusEl.className = "status";
      statusEl.textContent = "";
    }

    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function buildErrorMessage(code, detail) {
      const prefix = `Error #${code}: `;
      if (detail) return `${prefix}${detail}`;

      const defaults = {
        1: "API URL is not configured yet.",
        2: "Request timed out. Please try again.",
        3: "Server returned an HTTP error. Check Apps Script deployment settings.",
        4: "Invalid API response format. Ensure the script returns JSON.",
        5: "API rejected the request. Check Apps Script logs and sheet settings.",
        6: "Network request failed. Check internet and Web App access = Anyone.",
        7: "Unexpected error while submitting. Please try again."
      };
      return prefix + (defaults[code] || "Unknown submit error.");
    }

    function setJoinLink(anchor, url) {
      if (url) {
        anchor.href = url;
        anchor.style.display = "inline-flex";
      } else {
        anchor.removeAttribute("href");
        anchor.style.display = "none";
      }
    }

    async function handleSubmit(event) {
      event.preventDefault();
      clearStatus();
      resultEl.style.display = "none";

      const firstName = (firstNameInput.value || "").trim();
      const lastName = (lastNameInput.value || "").trim();
      const school = (schoolInput.value || "").trim();
      const graduationYear = (gradYearInput.value || "").trim();
      const email = (emailInput.value || "").trim().toLowerCase();

      if (!firstName || !lastName || !school || !graduationYear || !email) {
        return setStatus("error", "Please complete all required fields.");
      }
      if (!isValidEmail(email)) {
        return setStatus("error", "Please enter a valid email format.");
      }
      if (!API_URL || API_URL.includes("REPLACE_WITH")) {
        return setStatus("error", buildErrorMessage(1));
      }

      const originalButton = submitBtn.innerHTML;
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Submitting...';
      setStatus("info", "Saving your info and loading your community links...");

      try {
        const payload = new URLSearchParams({
          action: "register",
          firstName,
          lastName,
          school,
          graduationYear,
          email,
          pageUrl: window.location.href,
          userAgent: navigator.userAgent
        });

        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 20000);
        const response = await fetch(API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
            Accept: "application/json"
          },
          body: payload,
          signal: controller.signal
        });
        clearTimeout(timeout);

        if (!response.ok) {
          throw new Error(buildErrorMessage(3, `HTTP ${response.status}. Check deployed version + access settings.`));
        }

        let data = null;
        try {
          data = await response.json();
        } catch (jsonErr) {
          throw new Error(buildErrorMessage(4, "Response was not JSON."));
        }

        if (!data || !data.ok) {
          const serverMessage = data && data.error ? data.error : "Unknown API error";
          throw new Error(buildErrorMessage(5, serverMessage));
        }

        const fullName = `${firstName} ${lastName}`.trim();
        const links = data.links || {};

        welcomeName.textContent = fullName || "Member";
        setJoinLink(discordLink, links.discord || "");
        setJoinLink(groupmeLink, links.groupme || "");
        setJoinLink(instagramLink, links.instagramPrivate || "");
        setJoinLink(mailingLink, links.mailingList || "");

        resultEl.style.display = "block";
        setStatus("success", "Submitted successfully. Your join links are now unlocked.");
      } catch (error) {
        if (error && error.name === "AbortError") {
          setStatus("error", buildErrorMessage(2));
        } else if (error && error.message && /Error #/.test(error.message)) {
          setStatus("error", error.message);
        } else if (error && error.message && /Failed to fetch|NetworkError|Load failed/i.test(error.message)) {
          setStatus("error", buildErrorMessage(6));
        } else {
          setStatus("error", buildErrorMessage(7));
        }
        console.error("[Community Submit Error]", error);
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalButton;
      }
    }

    form.addEventListener("submit", handleSubmit);

    (function navToggle() {
      const toggleBtn = document.querySelector(".nav-toggle");
      const navLinks = document.getElementById("huNavLinks");
      if (!toggleBtn || !navLinks) return;
      const setExpanded = (expanded) => {
        toggleBtn.setAttribute("aria-expanded", String(expanded));
        navLinks.classList.toggle("is-open", expanded);
        const icon = toggleBtn.querySelector("i");
        if (icon) icon.className = expanded ? "fa-solid fa-xmark" : "fa-solid fa-bars";
      };
      toggleBtn.addEventListener("click", () => {
        const expanded = toggleBtn.getAttribute("aria-expanded") === "true";
        setExpanded(!expanded);
      });
      navLinks.addEventListener("click", (e) => {
        const a = e.target.closest("a");
        if (!a) return;
        const href = a.getAttribute("href") || "";
        if (href.startsWith("#")) setExpanded(false);
      });
      window.addEventListener("resize", () => {
        if (window.innerWidth > 768) setExpanded(false);
      });
      setExpanded(false);
    })();

    (function startETClock() {
      const clockEl = document.getElementById("et-clock");
      const dateEl = document.getElementById("et-date");
      if (!clockEl || !dateEl) return;
      const tz = "America/New_York";
      const tick = () => {
        const now = new Date();
        const timeStr = new Intl.DateTimeFormat("en-US", {
          timeZone: tz,
          hour: "numeric",
          minute: "2-digit",
          second: "2-digit",
          hour12: true
        }).format(now);
        const dateStr = new Intl.DateTimeFormat("en-US", {
          timeZone: tz,
          weekday: "short",
          month: "short",
          day: "numeric",
          year: "numeric"
        }).format(now);
        clockEl.textContent = `${timeStr} ET`;
        dateEl.textContent = dateStr;
      };
      tick();
      setInterval(tick, 1000);
    })();
  </script>
</body>
</html>
